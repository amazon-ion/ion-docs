!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ion=e()}}(function(){return function s(a,o,u){function l(t,e){if(!o[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[t]={exports:{}};a[t][0].call(i.exports,function(e){return l(a[t][1][e]||e)},i,i.exports,s,a,o,u)}return o[t].exports}for(var h="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var a=e("./IonTypes"),o=function(){function e(){(0,i.default)(this,e),this._annotations=[]}return(0,s.default)(e,[{key:"addAnnotation",value:function(e){this._annotations.push(e)}},{key:"setAnnotations",value:function(e){this._annotations=e}},{key:"_clearAnnotations",value:function(){this._annotations=[]}},{key:"writeValues",value:function(e){this._writeValues(e)}},{key:"_writeValues",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:0,n=e.type();for(null===n&&(n=e.next());null!==n;)this._writeValue(e,r),n=e.next()}},{key:"writeValue",value:function(e){this._writeValue(e)}},{key:"_writeValue",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:0,n=e.type();if(null!==n)if(0<r&&null!=e.fieldName()&&this.writeFieldName(e.fieldName()),this.setAnnotations(e.annotations()),e.isNull())this.writeNull(n);else{switch(n){case a.IonTypes.BOOL:this.writeBoolean(e.booleanValue());break;case a.IonTypes.INT:this.writeInt(e.numberValue());break;case a.IonTypes.FLOAT:this.writeFloat64(e.numberValue());break;case a.IonTypes.DECIMAL:this.writeDecimal(e.decimalValue());break;case a.IonTypes.TIMESTAMP:this.writeTimestamp(e.timestampValue());break;case a.IonTypes.SYMBOL:this.writeSymbol(e.stringValue());break;case a.IonTypes.STRING:this.writeString(e.stringValue());break;case a.IonTypes.CLOB:this.writeClob(e.byteValue());break;case a.IonTypes.BLOB:this.writeBlob(e.byteValue());break;case a.IonTypes.LIST:this.stepIn(a.IonTypes.LIST);break;case a.IonTypes.SEXP:this.stepIn(a.IonTypes.SEXP);break;case a.IonTypes.STRUCT:this.stepIn(a.IonTypes.STRUCT);break;default:throw new Error("Unrecognized type "+(null!==n?n.name:n))}n.isContainer&&(e.stepIn(),this._writeValues(e,r+1),this.stepOut(),e.stepOut())}}}]),e}();r.AbstractWriter=o},{"./IonTypes":27,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],2:[function(e,t,r){"use strict";var X=function(u){var v=1e7,c=7,t=9007199254740992,r=b(t),_=Math.log(t);function f(e,t){return void 0===e?f[0]:void 0!==t?10==+t?G(e):W(e,t):G(e)}function p(e,t){this.value=e,this.sign=t,this.isSmall=!1}function d(e){this.value=e,this.sign=e<0,this.isSmall=!0}function y(e){return-t<e&&e<t}function b(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function w(e){m(e);var t=e.length;if(t<4&&N(e,r)<0)switch(t){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*v;default:return e[0]+(e[1]+e[2]*v)*v}return e}function m(e){for(var t=e.length;0===e[--t];);e.length=t+1}function T(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function g(e){return 0<e?Math.floor(e):Math.ceil(e)}function n(e,t){var r,n,i=e.length,s=t.length,a=new Array(i),o=0,u=v;for(n=0;n<s;n++)o=u<=(r=e[n]+t[n]+o)?1:0,a[n]=r-o*u;for(;n<i;)o=(r=e[n]+o)===u?1:0,a[n++]=r-o*u;return 0<o&&a.push(o),a}function I(e,t){return e.length>=t.length?n(e,t):n(t,e)}function i(e,t){var r,n,i=e.length,s=new Array(i),a=v;for(n=0;n<i;n++)r=e[n]-a+t,t=Math.floor(r/a),s[n]=r-t*a,t+=1;for(;0<t;)s[n++]=t%a,t=Math.floor(t/a);return s}function S(e,t){var r,n,i=e.length,s=t.length,a=new Array(i),o=0,u=v;for(r=0;r<s;r++)o=(n=e[r]-o-t[r])<0?(n+=u,1):0,a[r]=n;for(r=s;r<i;r++){if(!((n=e[r]-o)<0)){a[r++]=n;break}n+=u,a[r]=n}for(;r<i;r++)a[r]=e[r];return m(a),a}function s(e,t,r){var n,i,s=e.length,a=new Array(s),o=-t,u=v;for(n=0;n<s;n++)i=e[n]+o,o=Math.floor(i/u),i%=u,a[n]=i<0?i+u:i;return"number"==typeof(a=w(a))?(r&&(a=-a),new d(a)):new p(a,r)}function C(e,t){var r,n,i,s,a=e.length,o=t.length,u=T(a+o),l=v;for(i=0;i<a;++i){s=e[i];for(var h=0;h<o;++h)r=s*t[h]+u[i+h],n=Math.floor(r/l),u[i+h]=r-n*l,u[i+h+1]+=n}return m(u),u}function E(e,t){var r,n,i=e.length,s=new Array(i),a=v,o=0;for(n=0;n<i;n++)r=e[n]*t+o,o=Math.floor(r/a),s[n]=r-o*a;for(;0<o;)s[n++]=o%a,o=Math.floor(o/a);return s}function k(e,t){for(var r=[];0<t--;)r.push(0);return r.concat(e)}function a(e,t,r){return new p(e<v?E(t,e):C(t,b(e)),r)}function o(e){var t,r,n,i,s=e.length,a=T(s+s),o=v;for(n=0;n<s;n++){r=0-(i=e[n])*i;for(var u=n;u<s;u++)t=i*e[u]*2+a[n+u]+r,r=Math.floor(t/o),a[n+u]=t-r*o;a[n+s]=r}return m(a),a}function L(e,t){var r,n,i,s,a=e.length,o=T(a),u=v;for(i=0,r=a-1;0<=r;--r)i=(s=i*u+e[r])-(n=g(s/t))*t,o[r]=0|n;return[o,0|i]}function A(e,t){var r,n,i=G(t),s=e.value,a=i.value;if(0===a)throw new Error("Cannot divide by zero");if(e.isSmall)return i.isSmall?[new d(g(s/a)),new d(s%a)]:[f[0],e];if(i.isSmall){if(1===a)return[e,f[0]];if(-1==a)return[e.negate(),f[0]];var o=Math.abs(a);if(o<v){n=w((r=L(s,o))[0]);var u=r[1];return e.sign&&(u=-u),"number"==typeof n?(e.sign!==i.sign&&(n=-n),[new d(n),new d(u)]):[new p(n,e.sign!==i.sign),new d(u)]}a=b(o)}var l=N(s,a);if(-1===l)return[f[0],e];if(0===l)return[f[e.sign===i.sign?1:-1],f[0]];n=(r=s.length+a.length<=200?function(e,t){var r,n,i,s,a,o,u,l=e.length,h=t.length,c=v,_=T(t.length),f=t[h-1],p=Math.ceil(c/(2*f)),d=E(e,p),y=E(t,p);for(d.length<=l&&d.push(0),y.push(0),f=y[h-1],n=l-h;0<=n;n--){for(r=c-1,d[n+h]!==f&&(r=Math.floor((d[n+h]*c+d[n+h-1])/f)),s=i=0,o=y.length,a=0;a<o;a++)i+=r*y[a],u=Math.floor(i/c),s+=d[n+a]-(i-u*c),i=u,s=s<0?(d[n+a]=s+c,-1):(d[n+a]=s,0);for(;0!==s;){for(r-=1,a=i=0;a<o;a++)i=(i+=d[n+a]-c+y[a])<0?(d[n+a]=i+c,0):(d[n+a]=i,1);s+=i}_[n]=r}return d=L(d,p)[0],[w(_),w(d)]}(s,a):function(e,t){for(var r,n,i,s,a,o=e.length,u=t.length,l=[],h=[],c=v;o;)if(h.unshift(e[--o]),m(h),N(h,t)<0)l.push(0);else{i=h[(n=h.length)-1]*c+h[n-2],s=t[u-1]*c+t[u-2],u<n&&(i=(i+1)*c),r=Math.ceil(i/s);do{if(N(a=E(t,r),h)<=0)break;r--}while(r);l.push(r),h=S(h,a)}return l.reverse(),[w(l),w(h)]}(s,a))[0];var h=e.sign!==i.sign,c=r[1],_=e.sign;return[n="number"==typeof n?(h&&(n=-n),new d(n)):new p(n,h),c="number"==typeof c?(_&&(c=-c),new d(c)):new p(c,_)]}function N(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;0<=r;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function l(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function h(e,t){for(var r,n,i,s=e.prev(),a=s,o=0;a.isEven();)a=a.divide(2),o++;e:for(n=0;n<t.length;n++)if(!e.lesser(t[n])&&!(i=X(t[n]).modPow(a,e)).isUnit()&&!i.equals(s)){for(r=o-1;0!=r;r--){if((i=i.square().mod(e)).isUnit())return!1;if(i.equals(s))continue e}return!1}return!0}p.prototype=Object.create(f.prototype),d.prototype=Object.create(f.prototype),p.prototype.plus=p.prototype.add=function(e){var t=G(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new p(i(r,Math.abs(n)),this.sign):new p(I(r,n),this.sign)},d.prototype.plus=d.prototype.add=function(e){var t=G(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(y(r+n))return new d(r+n);n=b(Math.abs(n))}return new p(i(n,Math.abs(r)),r<0)},p.prototype.minus=p.prototype.subtract=function(e){var t=G(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?s(r,Math.abs(n),this.sign):function(e,t,r){var n;return 0<=N(e,t)?n=S(e,t):(n=S(t,e),r=!r),"number"==typeof(n=w(n))?(r&&(n=-n),new d(n)):new p(n,r)}(r,n,this.sign)},d.prototype.minus=d.prototype.subtract=function(e){var t=G(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new d(r-n):s(n,Math.abs(r),0<=r)},p.prototype.negate=function(){return new p(this.value,!this.sign)},d.prototype.negate=function(){var e=this.sign,t=new d(-this.value);return t.sign=!e,t},p.prototype.abs=function(){return new p(this.value,!1)},d.prototype.abs=function(){return new d(Math.abs(this.value))},p.prototype.times=p.prototype.multiply=function(e){var t,r=G(e),n=this.value,i=r.value,s=this.sign!==r.sign;if(r.isSmall){if(0===i)return f[0];if(1===i)return this;if(-1===i)return this.negate();if((t=Math.abs(i))<v)return new p(E(n,t),s);i=b(t)}return function(e,t){return 0<-.012*e-.012*t+15e-6*e*t}(n.length,i.length)?new p(function e(t,r){var n=Math.max(t.length,r.length);if(n<=30)return C(t,r);n=Math.ceil(n/2);var i=t.slice(n),s=t.slice(0,n),a=r.slice(n),o=r.slice(0,n),u=e(s,o),l=e(i,a),h=I(I(u,k(S(S(e(I(s,i),I(o,a)),u),l),n)),k(l,2*n));return m(h),h}(n,i),s):new p(C(n,i),s)},d.prototype._multiplyBySmall=function(e){return y(e.value*this.value)?new d(e.value*this.value):a(Math.abs(e.value),b(Math.abs(this.value)),this.sign!==e.sign)},p.prototype._multiplyBySmall=function(e){return 0===e.value?f[0]:1===e.value?this:-1===e.value?this.negate():a(Math.abs(e.value),this.value,this.sign!==e.sign)},d.prototype.times=d.prototype.multiply=function(e){return G(e)._multiplyBySmall(this)},p.prototype.square=function(){return new p(o(this.value),!1)},d.prototype.square=function(){var e=this.value*this.value;return y(e)?new d(e):new p(o(b(Math.abs(this.value))),!1)},d.prototype.divmod=p.prototype.divmod=function(e){var t=A(this,e);return{quotient:t[0],remainder:t[1]}},d.prototype.over=d.prototype.divide=p.prototype.over=p.prototype.divide=function(e){return A(this,e)[0]},d.prototype.remainder=d.prototype.mod=p.prototype.remainder=p.prototype.mod=function(e){return A(this,e)[1]},p.prototype.pow=function(e){var t,r,n,i=G(e),s=this.value,a=i.value;if(0===a)return f[1];if(0===s)return f[0];if(1===s)return f[1];if(-1===s)return i.isEven()?f[1]:f[-1];if(i.sign)return f[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&y(t=Math.pow(s,a)))return new d(g(t));for(r=this,n=f[1];!0&a&&(n=n.times(r),--a),0!==a;)a/=2,r=r.square();return n},d.prototype.pow=p.prototype.pow,d.prototype.modPow=p.prototype.modPow=function(e,t){if(e=G(e),(t=G(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=f[1],n=this.mod(t);e.isPositive();){if(n.isZero())return f[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},p.prototype.compareAbs=function(e){var t=G(e),r=this.value,n=t.value;return t.isSmall?1:N(r,n)},d.prototype.compareAbs=function(e){var t=G(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:n<r?1:-1:-1},p.prototype.compareTo=p.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=G(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:N(r,n)*(this.sign?-1:1)},d.prototype.compareTo=d.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=G(e),r=this.value,n=t.value;return t.isSmall?r==n?0:n<r?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},d.prototype.eq=d.prototype.equals=p.prototype.eq=p.prototype.equals=function(e){return 0===this.compare(e)},d.prototype.neq=d.prototype.notEquals=p.prototype.neq=p.prototype.notEquals=function(e){return 0!==this.compare(e)},d.prototype.gt=d.prototype.greater=p.prototype.gt=p.prototype.greater=function(e){return 0<this.compare(e)},d.prototype.lt=d.prototype.lesser=p.prototype.lt=p.prototype.lesser=function(e){return this.compare(e)<0},d.prototype.geq=d.prototype.greaterOrEquals=p.prototype.geq=p.prototype.greaterOrEquals=function(e){return 0<=this.compare(e)},d.prototype.leq=d.prototype.lesserOrEquals=p.prototype.leq=p.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},p.prototype.isEven=function(){return 0==(1&this.value[0])},d.prototype.isEven=function(){return 0==(1&this.value)},p.prototype.isOdd=function(){return 1==(1&this.value[0])},d.prototype.isOdd=function(){return 1==(1&this.value)},p.prototype.isPositive=function(){return!this.sign},d.prototype.isPositive=function(){return 0<this.value},p.prototype.isNegative=function(){return this.sign},d.prototype.isNegative=function(){return this.value<0},p.prototype.isUnit=function(){return!1},d.prototype.isUnit=function(){return 1===Math.abs(this.value)},p.prototype.isZero=function(){return!1},d.prototype.isZero=function(){return 0===this.value},d.prototype.isDivisibleBy=p.prototype.isDivisibleBy=function(e){var t=G(e),r=t.value;return 0!==r&&(1===r||(2===r?this.isEven():this.mod(t).isZero()))},d.prototype.isPrime=p.prototype.isPrime=function(e){var t=l(this);if(t!==u)return t;var r=this.abs(),n=r.bitLength();if(n<=64)return h(r,[2,325,9375,28178,450775,9780504,1795265022]);for(var i=Math.log(2)*n,s=Math.ceil(!0===e?2*Math.pow(i,2):i),a=[],o=0;o<s;o++)a.push(X(o+2));return h(r,a)},d.prototype.isProbablePrime=p.prototype.isProbablePrime=function(e){var t=l(this);if(t!==u)return t;for(var r=this.abs(),n=e===u?5:e,i=[],s=0;s<n;s++)i.push(X.randBetween(2,r.minus(2)));return h(r,i)},d.prototype.modInv=p.prototype.modInv=function(e){for(var t,r,n,i=X.zero,s=X.one,a=G(e),o=this.abs();!o.isZero();)t=a.divide(o),r=i,n=a,i=s,a=o,s=r.subtract(t.multiply(s)),o=n.subtract(t.multiply(o));if(!a.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},p.prototype.next=function(){var e=this.value;return this.sign?s(e,1,this.sign):new p(i(e,1),this.sign)},d.prototype.next=function(){var e=this.value;return e+1<t?new d(e+1):new p(r,!1)},p.prototype.prev=function(){var e=this.value;return this.sign?new p(i(e,1),!0):s(e,1,this.sign)},d.prototype.prev=function(){var e=this.value;return-t<e-1?new d(e-1):new p(r,!0)};for(var O=[1];2*O[O.length-1]<=v;)O.push(2*O[O.length-1]);var U=O.length,B=O[U-1];function M(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=v||e instanceof p&&e.value.length<=1}function R(e,t,r){t=G(t);for(var n=e.isNegative(),i=t.isNegative(),s=n?e.not():e,a=i?t.not():t,o=0,u=0,l=null,h=null,c=[];!s.isZero()||!a.isZero();)o=(l=A(s,B))[1].toJSNumber(),n&&(o=B-1-o),u=(h=A(a,B))[1].toJSNumber(),i&&(u=B-1-u),s=l[0],a=h[0],c.push(r(o,u));for(var _=0!==r(n?1:0,i?1:0)?X(-1):X(0),f=c.length-1;0<=f;f-=1)_=_.multiply(B).add(X(c[f]));return _}d.prototype.shiftLeft=p.prototype.shiftLeft=function(e){if(!M(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;U<=e;)t=t.multiply(B),e-=U-1;return t.multiply(O[e])},d.prototype.shiftRight=p.prototype.shiftRight=function(e){var t;if(!M(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var r=this;U<=e;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=A(r,B))[1].isNegative()?t[0].prev():t[0],e-=U-1}return(t=A(r,O[e]))[1].isNegative()?t[0].prev():t[0]},d.prototype.not=p.prototype.not=function(){return this.negate().prev()},d.prototype.and=p.prototype.and=function(e){return R(this,e,function(e,t){return e&t})},d.prototype.or=p.prototype.or=function(e){return R(this,e,function(e,t){return e|t})},d.prototype.xor=p.prototype.xor=function(e){return R(this,e,function(e,t){return e^t})};var D=1<<30,x=(v&-v)*(v&-v)|D;function F(e){var t=e.value,r="number"==typeof t?t|D:t[0]+t[1]*v|x;return r&-r}function V(e,t){return e=G(e),t=G(t),e.greater(t)?e:t}function P(e,t){return e=G(e),t=G(t),e.lesser(t)?e:t}function q(e,t){if(e=G(e).abs(),t=G(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=f[1];e.isEven()&&t.isEven();)r=Math.min(F(e),F(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(F(e));do{for(;t.isEven();)t=t.divide(F(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}d.prototype.bitLength=p.prototype.bitLength=function(){var e=this;return e.compareTo(X(0))<0&&(e=e.negate().subtract(X(1))),0===e.compareTo(X(0))?X(0):X(function e(t,r){if(r.compareTo(t)<=0){var n=e(t,r.square(r)),i=n.p,s=n.e,a=i.multiply(r);return a.compareTo(t)<=0?{p:a,e:2*s+1}:{p:i,e:2*s}}return{p:X(1),e:0}}(e,X(2)).e).add(X(1))};var W=function(e,t){for(var r=e.length,n=Math.abs(t),i=0;i<r;i++){if("-"!==(u=e[i].toLowerCase())&&/[a-z0-9]/.test(u)){if(/[0-9]/.test(u)&&n<=+u){if("1"===u&&1===n)continue;throw new Error(u+" is not a valid digit in base "+t+".")}if(u.charCodeAt(0)-87>=n)throw new Error(u+" is not a valid digit in base "+t+".")}}if(2<=t&&t<=36&&r<=_/Math.log(t)){var s=parseInt(e,t);if(isNaN(s))throw new Error(u+" is not a valid digit in base "+t+".");return new d(parseInt(e,t))}t=G(t);var a=[],o="-"===e[0];for(i=o?1:0;i<e.length;i++){var u,l=(u=e[i].toLowerCase()).charCodeAt(0);if(48<=l&&l<=57)a.push(G(u));else if(97<=l&&l<=122)a.push(G(u.charCodeAt(0)-87));else{if("<"!==u)throw new Error(u+" is not a valid character");for(var h=i;">"!==e[++i];);a.push(G(e.slice(h+1,i)))}}return H(a,t,o)};function H(e,t,r){var n,i=f[0],s=f[1];for(n=e.length-1;0<=n;n--)i=i.add(e[n].times(s)),s=s.times(t);return r?i.negate():i}function Y(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function Z(e,t){if((t=X(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(+e-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:n};for(var i,s=[],a=e;a.isNegative()||0<=a.compareAbs(t);){a=(i=a.divmod(t)).quotient;var o=i.remainder;o.isNegative()&&(o=t.minus(o).abs(),a=a.next()),s.push(o.toJSNumber())}return s.push(a.toJSNumber()),{value:s.reverse(),isNegative:n}}function j(e,t){var r=Z(e,t);return(r.isNegative?"-":"")+r.value.map(Y).join("")}function z(e){if(y(+e)){var t=+e;if(t===g(t))return new d(t);throw new Error("Invalid integer: "+e)}var r="-"===e[0];r&&(e=e.slice(1));var n=e.split(/e/i);if(2<n.length)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var i=n[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==g(i)||!y(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var s=n[0],a=s.indexOf(".");if(0<=a&&(i-=s.length-a-1,s=s.slice(0,a)+s.slice(a+1)),i<0)throw new Error("Cannot include negative exponent part for integers");e=s+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);for(var o=[],u=e.length,l=c,h=u-l;0<u;)o.push(+e.slice(h,u)),(h-=l)<0&&(h=0),u-=l;return m(o),new p(o,r)}function G(e){return"number"==typeof e?function(e){if(y(e)){if(e!==g(e))throw new Error(e+" is not an integer.");return new d(e)}return z(e.toString())}(e):"string"==typeof e?z(e):e}p.prototype.toArray=function(e){return Z(this,e)},d.prototype.toArray=function(e){return Z(this,e)},p.prototype.toString=function(e){if(e===u&&(e=10),10!==e)return j(this,e);for(var t,r=this.value,n=r.length,i=String(r[--n]);0<=--n;)t=String(r[n]),i+="0000000".slice(t.length)+t;return(this.sign?"-":"")+i},d.prototype.toString=function(e){return e===u&&(e=10),10!=e?j(this,e):String(this.value)},p.prototype.toJSON=d.prototype.toJSON=function(){return this.toString()},p.prototype.toJSNumber=p.prototype.valueOf=function(){return parseInt(this.toString(),10)},d.prototype.toJSNumber=d.prototype.valueOf=function(){return this.value};for(var e=0;e<1e3;e++)f[e]=new d(e),0<e&&(f[-e]=new d(-e));return f.one=f[1],f.zero=f[0],f.minusOne=f[-1],f.max=V,f.min=P,f.gcd=q,f.lcm=function(e,t){return e=G(e).abs(),t=G(t).abs(),e.divide(q(e,t)).multiply(t)},f.isInstance=function(e){return e instanceof p||e instanceof d},f.randBetween=function(e,t){var r=P(e=G(e),t=G(t)),n=V(e,t).subtract(r).add(1);if(n.isSmall)return r.add(Math.floor(Math.random()*n));for(var i=[],s=!0,a=n.value.length-1;0<=a;a--){var o=s?n.value[a]:v,u=g(Math.random()*o);i.unshift(u),u<o&&(s=!1)}return i=w(i),r.add("number"==typeof i?new d(i):new p(i,!1))},f.fromArray=function(e,t,r){return H(e.map(G),G(t||10),r)},f}();void 0!==t&&t.hasOwnProperty("exports")&&(t.exports=X)},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./IonBinaryReader"),i=e("./IonConstants"),s=e("./IonSpan"),a=e("./IonTextReader"),o=e("./IonTextWriter"),u=e("./IonPrettyTextWriter"),l=e("./IonWriteable"),h=e("./IonBinaryWriter"),c=e("./IonLocalSymbolTable"),_=e("./IonUnicode");r.makeReader=function(e){if("string"==typeof e)return new a.TextReader(new s.StringSpan(e),null);var t=new Uint8Array(e);return function(e){if(e.length<4)return!1;for(var t=0;t<4;t++)if(e[t]!==i.IVM.binary[t])return!1;return!0}(t)?new n.BinaryReader(new s.BinarySpan(t),null):new a.TextReader(new s.StringSpan(_.decodeUtf8(t)),null)},r.makeTextWriter=function(){return new o.TextWriter(new l.Writeable)},r.makePrettyWriter=function(e){return new u.PrettyTextWriter(new l.Writeable,e)},r.makeBinaryWriter=function(){var e=c.defaultLocalSymbolTable();return new h.BinaryWriter(e,new l.Writeable)};var f=e("./IonCatalog");r.Catalog=f.Catalog;var p=e("./IonDecimal");r.Decimal=p.Decimal;var d=e("./IonLocalSymbolTable");r.defaultLocalSymbolTable=d.defaultLocalSymbolTable;var y=e("./IonType");r.IonType=y.IonType;var v=e("./IonTypes");r.IonTypes=v.IonTypes;var b=e("./IonSharedSymbolTable");r.SharedSymbolTable=b.SharedSymbolTable;var w=e("./IonTimestamp");r.TimestampPrecision=w.TimestampPrecision,r.Timestamp=w.Timestamp;var m=e("./IonText");r.toBase64=m.toBase64;var T=e("./IonUnicode");r.decodeUtf8=T.decodeUtf8},{"./IonBinaryReader":5,"./IonBinaryWriter":6,"./IonCatalog":7,"./IonConstants":8,"./IonDecimal":9,"./IonLocalSymbolTable":11,"./IonPrettyTextWriter":16,"./IonSharedSymbolTable":17,"./IonSpan":18,"./IonText":22,"./IonTextReader":23,"./IonTextWriter":24,"./IonTimestamp":25,"./IonType":26,"./IonTypes":27,"./IonUnicode":28,"./IonWriteable":29}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NIBBLE_MASK=15,r.BYTE_MASK=255,r.TYPE_SHIFT=4,r.BYTE_SHIFT=8,r.LEN_MASK=15,r.LEN_VAR=14,r.LEN_NULL=15,r.TB_NULL=0,r.TB_BOOL=1,r.TB_INT=2,r.TB_NEG_INT=3,r.TB_FLOAT=4,r.TB_DECIMAL=5,r.TB_TIMESTAMP=6,r.TB_SYMBOL=7,r.TB_STRING=8,r.TB_CLOB=9,r.TB_BLOB=10,r.TB_LIST=11,r.TB_SEXP=12,r.TB_STRUCT=13,r.TB_ANNOTATION=14},{}],5:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var a=e("./IonCatalog"),o=e("./IonLocalSymbolTable"),u=e("./IonSymbols"),l=e("./IonType"),h=e("./IonTypes"),c=e("./IonConstants"),_=e("./IonSymbols"),f=e("./IonParserBinaryRaw");new l.IonType(-1,"raw_input",!0,!1,!1,!1);function p(e){switch(e){case 0:return h.IonTypes.NULL;case 1:return h.IonTypes.BOOL;case 2:case 3:return h.IonTypes.INT;case 4:return h.IonTypes.FLOAT;case 5:return h.IonTypes.DECIMAL;case 6:return h.IonTypes.TIMESTAMP;case 7:return h.IonTypes.SYMBOL;case 8:return h.IonTypes.STRING;case 9:return h.IonTypes.CLOB;case 10:return h.IonTypes.BLOB;case 11:return h.IonTypes.LIST;case 12:return h.IonTypes.SEXP;case 13:return h.IonTypes.STRUCT;default:return null}}var d=function(){function r(e,t){(0,i.default)(this,r),this._annotations=null,this._parser=new f.ParserBinaryRaw(e),this._cat=t||new a.Catalog,this._symtab=o.defaultLocalSymbolTable(),this._raw_type=-2}return(0,s.default)(r,[{key:"next",value:function(){if(this._annotations=null,-1===this._raw_type)return null;for(this._raw_type=this._parser.next();0===this.depth();this._raw_type=this._parser.next())if(7===this._raw_type){if(this._parser._getSid()!==c.IVM.sid)break;this._symtab=o.defaultLocalSymbolTable()}else{if(13!==this._raw_type)break;if(!this._parser.hasAnnotations())break;if(this._parser.getAnnotation(0)!==u.ion_symbol_table_sid)break;this._symtab=_.makeSymbolTable(this._cat,this)}return p(this._raw_type)}},{key:"stepIn",value:function(){if(!p(this._raw_type).isContainer)throw new Error("Can't step in to a scalar value");this._parser.stepIn(),this._raw_type=-2}},{key:"stepOut",value:function(){this._parser.stepOut(),this._raw_type=-2}},{key:"type",value:function(){return p(this._raw_type)}},{key:"depth",value:function(){return this._parser.depth()}},{key:"fieldName",value:function(){return this.getSymbolString(this._parser.getFieldId())}},{key:"hasAnnotations",value:function(){return this._parser.hasAnnotations()}},{key:"_loadAnnotations",value:function(){var t=this;null===this._annotations&&(this._annotations=[],this._parser.getAnnotations().forEach(function(e){t._annotations.push(t.getSymbolString(e))}))}},{key:"annotations",value:function(){return this._loadAnnotations(),this._annotations}},{key:"getAnnotation",value:function(e){return this._loadAnnotations(),this._annotations[e]}},{key:"isNull",value:function(){return 0===this._raw_type||this._parser.isNull()}},{key:"byteValue",value:function(){return this._parser.byteValue()}},{key:"booleanValue",value:function(){return this._parser.booleanValue()}},{key:"decimalValue",value:function(){return this._parser.decimalValue()}},{key:"numberValue",value:function(){return this._parser.numberValue()}},{key:"stringValue",value:function(){var e=this._parser;switch(p(this._raw_type)){case h.IonTypes.NULL:return null;case h.IonTypes.STRING:return this.isNull()?null:e.stringValue();case h.IonTypes.SYMBOL:return this.isNull()?null:this.getSymbolString(e._getSid())}throw new Error("Current value is not a string or symbol.")}},{key:"timestampValue",value:function(){return this._parser.timestampValue()}},{key:"value",value:function(){var e=this.type();if(e&&e.isContainer){if(this.isNull())return null;throw new Error("Unable to provide a value for "+e.name+" containers.")}switch(e){case h.IonTypes.NULL:return null;case h.IonTypes.BLOB:case h.IonTypes.CLOB:return this.byteValue();case h.IonTypes.BOOL:return this.booleanValue();case h.IonTypes.DECIMAL:return this.decimalValue();case h.IonTypes.FLOAT:case h.IonTypes.INT:return this.numberValue();case h.IonTypes.STRING:case h.IonTypes.SYMBOL:return this.stringValue();case h.IonTypes.TIMESTAMP:return this.timestampValue();default:throw new Error("There is no current value.")}}},{key:"getSymbolString",value:function(e){var t=null;return 0<e&&void 0===(t=this._symtab.getSymbol(e))&&(t="$"+e.toString()),t}}]),r}();r.BinaryReader=d},{"./IonCatalog":7,"./IonConstants":8,"./IonLocalSymbolTable":11,"./IonParserBinaryRaw":14,"./IonSymbols":20,"./IonType":26,"./IonTypes":27,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],6:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),a=n(e("@babel/runtime/helpers/get")),u=n(e("@babel/runtime/helpers/classCallCheck")),l=n(e("@babel/runtime/helpers/createClass")),h=n(e("@babel/runtime/helpers/possibleConstructorReturn")),c=n(e("@babel/runtime/helpers/getPrototypeOf")),_=n(e("@babel/runtime/helpers/inherits"));Object.defineProperty(r,"__esModule",{value:!0});var o,i,f,s,p=e("./AbstractWriter"),d=e("./IonDecimal"),y=e("./IonUnicode"),v=e("./IonTypes"),b=e("./IonLowLevelBinaryWriter"),w=e("./IonTimestamp"),m=e("./IonWriteable"),T=e("./util");(i=o=o||{})[i.VALUE=0]="VALUE",i[i.STRUCT_FIELD=1]="STRUCT_FIELD",i[i.STRUCT_VALUE=2]="STRUCT_VALUE",i[i.CLOSED=3]="CLOSED",(s=f=f||{})[s.NULL=0]="NULL",s[s.BOOL=1]="BOOL",s[s.POSITIVE_INT=2]="POSITIVE_INT",s[s.NEGATIVE_INT=3]="NEGATIVE_INT",s[s.FLOAT=4]="FLOAT",s[s.DECIMAL=5]="DECIMAL",s[s.TIMESTAMP=6]="TIMESTAMP",s[s.SYMBOL=7]="SYMBOL",s[s.STRING=8]="STRING",s[s.CLOB=9]="CLOB",s[s.BLOB=10]="BLOB",s[s.LIST=11]="LIST",s[s.SEXP=12]="SEXP",s[s.STRUCT=13]="STRUCT",s[s.ANNOTATION=14]="ANNOTATION";var g=function(e){function n(e,t){var r;return(0,u.default)(this,n),(r=(0,h.default)(this,(0,c.default)(n).call(this))).datagram=[],r.containers=[],r.state=o.VALUE,r.symbolTable=e,r.writer=new b.LowLevelBinaryWriter(t),r}return(0,_.default)(n,e),(0,l.default)(n,[{key:"getBytes",value:function(){return this.writer.getBytes()}},{key:"writeBlob",value:function(e){this.checkWriteValue(),null!=e?this.addNode(new N(this.writer,this.getCurrentContainer(),v.IonTypes.BLOB,this.encodeAnnotations(this._annotations),e)):this.writeNull(v.IonTypes.BLOB)}},{key:"writeBoolean",value:function(e){this.checkWriteValue(),null!=e?this.addNode(new L(this.writer,this.getCurrentContainer(),this.encodeAnnotations(this._annotations),e)):this.writeNull(v.IonTypes.BOOL)}},{key:"writeClob",value:function(e){this.checkWriteValue(),null!=e?this.addNode(new N(this.writer,this.getCurrentContainer(),v.IonTypes.CLOB,this.encodeAnnotations(this._annotations),e)):this.writeNull(v.IonTypes.CLOB)}},{key:"writeDecimal",value:function(e){if(this.checkWriteValue(),null!=e){"string"==typeof e&&(e=d.Decimal.parse(e));var t=e._getExponent(),r=e._getCoefficient();if(r.isZero()&&!e.isNegative()&&0===t&&1===T._sign(t))this.addNode(new N(this.writer,this.getCurrentContainer(),v.IonTypes.DECIMAL,this.encodeAnnotations(this._annotations),new Uint8Array(0)));else{var n=!(r.isZero()&&1===r.signum()),i=n?r.intBytes():null,s=b.LowLevelBinaryWriter.getVariableLengthSignedIntSize(t)+(n?i.length:0),a=new b.LowLevelBinaryWriter(new m.Writeable(s));a.writeVariableLengthSignedInt(t),n&&a.writeBytes(i),this.addNode(new N(this.writer,this.getCurrentContainer(),v.IonTypes.DECIMAL,this.encodeAnnotations(this._annotations),a.getBytes()))}}else this.writeNull(v.IonTypes.DECIMAL)}},{key:"writeFloat32",value:function(e){if(this.checkWriteValue(),null!=e){var t;if(Object.is(e,0))t=new Uint8Array(0);else{var r=new ArrayBuffer(4);new DataView(r).setFloat32(0,e,!1),t=new Uint8Array(r)}this.addNode(new N(this.writer,this.getCurrentContainer(),v.IonTypes.FLOAT,this.encodeAnnotations(this._annotations),t))}else this.writeNull(v.IonTypes.FLOAT)}},{key:"writeFloat64",value:function(e){if(this.checkWriteValue(),null!=e){var t;if(Object.is(e,0))t=new Uint8Array(0);else{var r=new ArrayBuffer(8);new DataView(r).setFloat64(0,e,!1),t=new Uint8Array(r)}this.addNode(new N(this.writer,this.getCurrentContainer(),v.IonTypes.FLOAT,this.encodeAnnotations(this._annotations),t))}else this.writeNull(v.IonTypes.FLOAT)}},{key:"writeInt",value:function(e){this.checkWriteValue(),null!=e?this.addNode(new A(this.writer,this.getCurrentContainer(),this.encodeAnnotations(this._annotations),e)):this.writeNull(v.IonTypes.INT)}},{key:"writeNull",value:function(e){var t=0<arguments.length&&void 0!==e?e:v.IonTypes.NULL;this.checkWriteValue(),this.addNode(new O(this.writer,this.getCurrentContainer(),t,this.encodeAnnotations(this._annotations)))}},{key:"writeString",value:function(e){this.checkWriteValue(),null!=e?this.addNode(new N(this.writer,this.getCurrentContainer(),v.IonTypes.STRING,this.encodeAnnotations(this._annotations),y.encodeUtf8(e))):this.writeNull(v.IonTypes.STRING)}},{key:"writeSymbol",value:function(e){if(this.checkWriteValue(),null===e)this.writeNull(v.IonTypes.SYMBOL);else{var t=this.symbolTable.addSymbol(e),r=new b.LowLevelBinaryWriter(new m.Writeable(b.LowLevelBinaryWriter.getUnsignedIntSize(t)));r.writeUnsignedInt(t),this.addNode(new N(this.writer,this.getCurrentContainer(),v.IonTypes.SYMBOL,this.encodeAnnotations(this._annotations),r.getBytes()))}}},{key:"writeTimestamp",value:function(e){if(this.checkWriteValue(),null!=e){var t=new b.LowLevelBinaryWriter(new m.Writeable(12));t.writeVariableLengthSignedInt(e.getLocalOffset());var r=e.getDate();if(t.writeVariableLengthUnsignedInt(r.getUTCFullYear()),e.getPrecision()>=w.TimestampPrecision.MONTH&&t.writeVariableLengthUnsignedInt(r.getUTCMonth()+1),e.getPrecision()>=w.TimestampPrecision.DAY&&t.writeVariableLengthUnsignedInt(r.getUTCDate()),e.getPrecision()>=w.TimestampPrecision.HOUR_AND_MINUTE&&(t.writeVariableLengthUnsignedInt(r.getUTCHours()),t.writeVariableLengthUnsignedInt(r.getUTCMinutes())),e.getPrecision()>=w.TimestampPrecision.SECONDS){t.writeVariableLengthUnsignedInt(e.getSecondsInt());var n=e._getFractionalSeconds();0!==n._getExponent()&&(t.writeVariableLengthSignedInt(n._getExponent()),n._getCoefficient().isZero()||t.writeBytes(n._getCoefficient().intBytes()))}this.addNode(new N(this.writer,this.getCurrentContainer(),v.IonTypes.TIMESTAMP,this.encodeAnnotations(this._annotations),t.getBytes()))}else this.writeNull(v.IonTypes.TIMESTAMP)}},{key:"stepIn",value:function(e){switch(this.checkWriteValue(),e){case v.IonTypes.LIST:case v.IonTypes.SEXP:this.addNode(new C(this.writer,this.getCurrentContainer(),e,this.encodeAnnotations(this._annotations)));break;case v.IonTypes.STRUCT:this.addNode(new E(this.writer,this.getCurrentContainer(),this.encodeAnnotations(this._annotations))),this.state=o.STRUCT_FIELD;break;default:throw new Error("Unrecognized container type")}}},{key:"stepOut",value:function(){if(this.isTopLevel())throw new Error("Not currently in a container");if(this.state===o.STRUCT_VALUE)throw new Error("Cannot exit a struct with a partially written field");this.containers.pop(),this.isTopLevel()?this.state=o.VALUE:this.state=this.getCurrentContainer()instanceof E?o.STRUCT_FIELD:o.VALUE}},{key:"writeIvm",value:function(){this.writer.writeByte(224),this.writer.writeByte(1),this.writer.writeByte(0),this.writer.writeByte(234)}},{key:"writeFieldName",value:function(e){if(this.state!==o.STRUCT_FIELD)throw new Error("Cannot write a field name outside of a struct");this.fieldName=this.encodeAnnotations([e]),this.state=o.STRUCT_VALUE}},{key:"encodeAnnotations",value:function(e){if(!e||0===e.length)return new Uint8Array(0);var t=new m.Writeable,r=new b.LowLevelBinaryWriter(t),n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value,l=this.symbolTable.addSymbol(u);r.writeVariableLengthUnsignedInt(l)}}catch(e){i=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw s}}return this._clearAnnotations(),t.getBytes()}},{key:"isTopLevel",value:function(){return 0===this.containers.length}},{key:"getCurrentContainer",value:function(){return this.containers[this.containers.length-1]}},{key:"addNode",value:function(e){this.isTopLevel()?this.datagram.push(e):this.state===o.STRUCT_VALUE?(this.getCurrentContainer().addChild(e,this.fieldName),this.state=o.STRUCT_FIELD):this.getCurrentContainer().addChild(e),e.isContainer()&&(this.containers.push(e),this.state=o.VALUE)}},{key:"close",value:function(){if(this.checkClosed(),!this.isTopLevel())throw new Error("Writer has one or more open containers; call stepOut() for each container prior to close()");this.writeIvm();var e=this.datagram;this.datagram=[],this.writeSymbolTable();var t=!0,r=!1,n=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){i.value.write()}}catch(e){r=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw n}}this.state=o.CLOSED}},{key:"checkWriteValue",value:function(){if(this.checkClosed(),this.state===o.STRUCT_FIELD)throw new Error("Expected a struct field name instead of a value")}},{key:"checkClosed",value:function(){if(this.state===o.CLOSED)throw new Error("Writer is closed, no further operations are available")}},{key:"writeSymbolTable",value:function(){var e="$ion"!=this.symbolTable.import.symbolTable.name,t=0<this.symbolTable.symbols.length;if(e||t){if(this.setAnnotations(["$ion_symbol_table"]),this.stepIn(v.IonTypes.STRUCT),e&&(this.writeFieldName("imports"),this.stepIn(v.IonTypes.LIST),this.writeImport(this.symbolTable.import),this.stepOut()),t){this.writeFieldName("symbols"),this.stepIn(v.IonTypes.LIST);var r=!0,n=!1,i=void 0;try{for(var s,a=this.symbolTable.symbols[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var o=s.value;void 0!==o&&this.writeString(o)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}this.stepOut()}this.stepOut(),this.datagram[0].write()}}},{key:"writeImport",value:function(e){e&&(this.writeImport(e.parent),this.stepIn(v.IonTypes.STRUCT),this.writeFieldName("name"),this.writeString(e.symbolTable.name),this.writeFieldName("version"),this.writeInt(e.symbolTable.version),this.writeFieldName("max_id"),this.writeInt(e.length),this.stepOut())}}]),n}(p.AbstractWriter);r.BinaryWriter=g;var I=function(){function i(e,t,r,n){(0,u.default)(this,i),this._writer=e,this.parent=t,this._type=r,this.annotations=n}return(0,l.default)(i,[{key:"hasAnnotations",value:function(){return 0<this.annotations.length}},{key:"writeTypeDescriptorAndLength",value:function(e,t,r){var n=e<<4;t?(n|=15,this.writer.writeByte(n)):r<14?(n|=r,this.writer.writeByte(n)):(n|=14,this.writer.writeByte(n),this.writer.writeVariableLengthUnsignedInt(r))}},{key:"getContainedValueLength",value:function(){var e=this.getValueLength();return 1+i.getLengthLength(e)+e}},{key:"getAnnotatedContainerLength",value:function(){var e=this.annotations.length;return e+b.LowLevelBinaryWriter.getVariableLengthUnsignedIntSize(e)+this.getContainedValueLength()}},{key:"getAnnotationsLength",value:function(){if(this.hasAnnotations()){var e=this.annotations.length,t=b.LowLevelBinaryWriter.getVariableLengthUnsignedIntSize(e),r=this.getContainedValueLength();return 1+i.getLengthLength(r)+t+e}return 0}},{key:"getLength",value:function(){return this.getAnnotationsLength()+this.getContainedValueLength()}},{key:"writeAnnotations",value:function(){if(this.hasAnnotations()){var e=this.getAnnotatedContainerLength();this.writeTypeDescriptorAndLength(f.ANNOTATION,!1,e),this.writer.writeVariableLengthUnsignedInt(this.annotations.length),this.writer.writeBytes(new Uint8Array(this.annotations))}}},{key:"typeCode",get:function(){return this._type.binaryTypeId}},{key:"writer",get:function(){return this._writer}}],[{key:"getLengthLength",value:function(e){return e<14?0:b.LowLevelBinaryWriter.getVariableLengthUnsignedIntSize(e)}}]),i}(),S=function(e){function i(e,t,r,n){return(0,u.default)(this,i),(0,h.default)(this,(0,c.default)(i).call(this,e,t,r,n))}return(0,_.default)(i,e),(0,l.default)(i,[{key:"isContainer",value:function(){return!0}}]),i}(r.AbstractNode=I),C=function(e){function s(e,t,r,n){var i;return(0,u.default)(this,s),(i=(0,h.default)(this,(0,c.default)(s).call(this,e,t,r,n))).children=[],i}return(0,_.default)(s,e),(0,l.default)(s,[{key:"addChild",value:function(e,t){this.children.push(e)}},{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.getValueLength());var e=!0,t=!1,r=void 0;try{for(var n,i=this.children[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.write()}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"getValueLength",value:function(){var e=0,t=!0,r=!1,n=void 0;try{for(var i,s=this.children[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){e+=i.value.getLength()}}catch(e){r=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw n}}return e}},{key:"getLength",value:function(){return void 0===this.length&&(this.length=(0,a.default)((0,c.default)(s.prototype),"getLength",this).call(this)),this.length}}]),s}(S),E=function(e){function i(e,t,r){var n;return(0,u.default)(this,i),(n=(0,h.default)(this,(0,c.default)(i).call(this,e,t,v.IonTypes.STRUCT,r))).fields=[],n}return(0,_.default)(i,e),(0,l.default)(i,[{key:"addChild",value:function(e,t){if(null==t)throw new Error("Cannot add a value to a struct without a field name");this.fields.push({name:t,value:e})}},{key:"getValueLength",value:function(){var e=0,t=!0,r=!1,n=void 0;try{for(var i,s=this.fields[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var a=i.value;e+=a.name.length,e+=a.value.getLength()}}catch(e){r=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw n}}return e}},{key:"getLength",value:function(){return void 0===this.length&&(this.length=(0,a.default)((0,c.default)(i.prototype),"getLength",this).call(this)),this.length}},{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.getValueLength());var e=!0,t=!1,r=void 0;try{for(var n,i=this.fields[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var s=n.value;this.writer.writeBytes(new Uint8Array(s.name)),s.value.write()}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}}]),i}(S),k=function(e){function t(){return(0,u.default)(this,t),(0,h.default)(this,(0,c.default)(t).apply(this,arguments))}return(0,_.default)(t,e),(0,l.default)(t,[{key:"addChild",value:function(e,t){throw new Error("Cannot add a child to a leaf node")}},{key:"isContainer",value:function(){return!1}}]),t}(I),L=function(e){function s(e,t,r,n){var i;return(0,u.default)(this,s),(i=(0,h.default)(this,(0,c.default)(s).call(this,e,t,v.IonTypes.BOOL,r))).value=n,i}return(0,_.default)(s,e),(0,l.default)(s,[{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.value?1:0)}},{key:"getValueLength",value:function(){return 0}}]),s}(r.LeafNode=k),A=function(e){function o(e,t,r,n){var i;if((0,u.default)(this,o),(i=(0,h.default)(this,(0,c.default)(o).call(this,e,t,v.IonTypes.INT,r))).value=n,0===i.value)i.intTypeCode=f.POSITIVE_INT,i.bytes=new Uint8Array(0);else if(0<i.value){i.intTypeCode=f.POSITIVE_INT;var s=new b.LowLevelBinaryWriter(new m.Writeable(b.LowLevelBinaryWriter.getUnsignedIntSize(i.value)));s.writeUnsignedInt(i.value),i.bytes=s.getBytes()}else{i.intTypeCode=f.NEGATIVE_INT;var a=new b.LowLevelBinaryWriter(new m.Writeable(b.LowLevelBinaryWriter.getUnsignedIntSize(Math.abs(i.value))));a.writeUnsignedInt(Math.abs(i.value)),i.bytes=a.getBytes()}return i}return(0,_.default)(o,e),(0,l.default)(o,[{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.intTypeCode,!1,this.bytes.length),this.writer.writeBytes(this.bytes)}},{key:"getValueLength",value:function(){return this.bytes.length}}]),o}(k),N=function(e){function a(e,t,r,n,i){var s;return(0,u.default)(this,a),(s=(0,h.default)(this,(0,c.default)(a).call(this,e,t,r,n))).value=i,s}return(0,_.default)(a,e),(0,l.default)(a,[{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.value.length),this.writer.writeBytes(this.value)}},{key:"getValueLength",value:function(){return this.value.length}}]),a}(k),O=function(e){function i(e,t,r,n){return(0,u.default)(this,i),(0,h.default)(this,(0,c.default)(i).call(this,e,t,r,n))}return(0,_.default)(i,e),(0,l.default)(i,[{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!0,0)}},{key:"getValueLength",value:function(){return 0}}]),i}(k);r.NullNode=O},{"./AbstractWriter":1,"./IonDecimal":9,"./IonLowLevelBinaryWriter":13,"./IonTimestamp":25,"./IonTypes":27,"./IonUnicode":28,"./IonWriteable":29,"./util":30,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/get":37,"@babel/runtime/helpers/getPrototypeOf":38,"@babel/runtime/helpers/inherits":39,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/possibleConstructorReturn":43}],7:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var a=e("./IonSystemSymbolTable");var o=function(){function e(){(0,i.default)(this,e),this.symbolTables={},this.add(a.getSystemSymbolTable())}return(0,s.default)(e,[{key:"add",value:function(e){if(void 0===e.name||null===e.name)throw new Error("SymbolTable name must be defined.");void 0===this.symbolTables[e.name]&&(this.symbolTables[e.name]=[]),this.symbolTables[e.name][e.version]=e}},{key:"getVersion",value:function(e,t){var r=this.symbolTables[e];if(!r)return null;var n=r[t];return(n=n||r[r.length])||null}},{key:"getTable",value:function(e){var t=this.symbolTables[e];return void 0===t?null:t[t.length-1]}}]),e}();r.Catalog=o},{"./IonSystemSymbolTable":21,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EOF=-1,r.IVM={text:"$ion_1_0",binary:new Uint8Array([224,1,0,234]),sid:2}},{}],9:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),p=n(e("@babel/runtime/helpers/slicedToArray")),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var d=e("./IonLongInt"),o=e("./util"),a=function(){function a(e,t){if((0,i.default)(this,a),!Number.isInteger(e))throw new Error("The provided coefficient was not an integer. ("+e+")");this._initialize(new d.LongInt(e),t)}return(0,s.default)(a,[{key:"_initialize",value:function(e,t){this._coefficient=e,this._exponent=t}},{key:"isNegative",value:function(){return-1===this._coefficient.signum()}},{key:"numberValue",value:function(){return this._coefficient.numberValue()*Math.pow(10,this._exponent)}},{key:"intValue",value:function(){return Math.trunc(this.numberValue())}},{key:"toString",value:function(){var e=Math.abs(this._coefficient.numberValue())+"",t=e.length,r=this._exponent+(t-1),n="";return this._exponent<=0&&-6<=r?0===this._exponent?n+=e:e.length<=-this._exponent?n+=(e="0".repeat(-this._exponent-e.length+1)+e).substr(0,1)+"."+e.substr(1):n+=e.substr(0,t+this._exponent)+"."+e.substr(t+this._exponent):(n+=e[0],1<e.length&&(n+="."+e.substr(1)),n+="E"+(0<r?"+":"")+r),(-1===this._coefficient.signum()?"-":"")+n}},{key:"_getCoefficient",value:function(){return this._coefficient}},{key:"_getExponent",value:function(){return this._exponent}},{key:"equals",value:function(e){return this._getExponent()===e._getExponent()&&o._sign(this._getExponent())===o._sign(e._getExponent())&&this.isNegative()===e.isNegative()&&this._getCoefficient().equals(e._getCoefficient())}},{key:"compareTo",value:function(e){if(this._coefficient.isZero()&&e._getCoefficient().isZero())return 0;var t=this.isNegative();if(t!==e.isNegative())return t?-1:1;var r=this._compareToParams(),n=(0,p.default)(r,3),i=n[0],s=n[1],a=n[2],o=e._compareToParams(),u=(0,p.default)(o,3),l=u[0],h=u[1],c=u[2];if(c<a)return t?-1:1;if(a<c)return t?1:-1;i.length<l.length?i+="0".repeat(h-s):i.length>l.length&&(l+="0".repeat(s-h));var _=new d.LongInt(i),f=new d.LongInt(l);return _.greaterThan(f)?t?-1:1:_.lessThan(f)?t?1:-1:0}},{key:"_compareToParams",value:function(){var e=this.isNegative()?this._coefficient.toString().substring(1):this._coefficient.toString(),t=e.length,r=t+this._exponent;return r<=0&&(r-=1),this._coefficient.isZero()&&(r=-1/0),[e,t,r]}}],[{key:"_fromLongIntCoefficient",value:function(e,t){var r=Object.create(this.prototype);return r._initialize(e,t),r}},{key:"parse",value:function(e){var t=0;if("null"===e||"null.decimal"===e)return null;var r=e.match("[d|D]"),n=e.length;r&&(t=Number(e.substring(r.index+1,e.length)),n=r.index);var i=e.match("\\.");if(i){var s=r?r.index-1-i.index:e.length-1-i.index;return a._fromLongIntCoefficient(new d.LongInt(e.substring(0,i.index)+e.substring(i.index+1,n)),t-s)}return a._fromLongIntCoefficient(new d.LongInt(e.substring(0,n)),t)}}]),a}();(r.Decimal=a).ZERO=new a(0,0),a.ONE=new a(1,0)},{"./IonLongInt":12,"./util":30,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/slicedToArray":45}],10:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),a=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function s(e,t,r){(0,a.default)(this,s),this.index={},this._parent=e,this._symbolTable=t,this._offset=this.parent?this.parent.offset+this.parent.length:1,this._length=r||this.symbolTable.symbols.length;for(var n=this.symbolTable.symbols,i=0;i<this.length;i++)this.index[n[i]]=this.offset+i}return(0,i.default)(s,[{key:"getSymbol",value:function(e){if(void 0===this.parent)throw new Error("Illegal parent state.");if(null!==this.parent){var t=this.parent.getSymbol(e);if(t)return t}var r=e-this.offset;if(r<this.length)return this.symbolTable.symbols[r]}},{key:"getSymbolId",value:function(e){return this.parent&&this._parent.getSymbolId(e)||this.index[e]}},{key:"parent",get:function(){return this._parent}},{key:"offset",get:function(){return this._offset}},{key:"length",get:function(){return this._length}},{key:"symbolTable",get:function(){return this._symbolTable}}]),s}();r.Import=s},{"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],11:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),l=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var h=e("./IonSystemSymbolTable"),s=function(){function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:h.getSystemSymbolTableImport(),t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];(0,l.default)(this,u),this._import=e,this._symbols=[],this.index={},this.offset=e.offset+e.length;var r=!0,n=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var o=s.value;this.addSymbol(o)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}return(0,i.default)(u,[{key:"getSymbolId",value:function(e){return this._import.getSymbolId(e)||this.index[e]}},{key:"addSymbol",value:function(e){var t=this.getSymbolId(e);if(void 0!==t)return t;var r=this.offset+this.symbols.length;return this.symbols.push(e),this.index[e]=r}},{key:"getSymbol",value:function(e){if(e>this.maxId)throw new Error("SymbolID greater than maxID.");var t=this.import.getSymbol(e);if(void 0!==t)return t;var r=e-this.offset;return this.symbols[r]}},{key:"symbols",get:function(){return this._symbols}},{key:"maxId",get:function(){return this.offset+this._symbols.length-1}},{key:"import",get:function(){return this._import}}]),u}();r.LocalSymbolTable=s,r.defaultLocalSymbolTable=function(){return new s(h.getSystemSymbolTableImport())}},{"./IonSystemSymbolTable":21,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],12:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var a=e("./BigInteger.js"),o=e("./util"),u=function(){function r(e){if((0,i.default)(this,r),"string"==typeof e){var t=e.trim();"-"===t[0]?this.int=a(t.substr(1)).negate():this.int=a(t)}else if("number"==typeof e)0===e&&-1===o._sign(e)?this.int=a(0).negate():this.int=a(e);else{if(!(e instanceof a))throw new Error("Invalid LongInt parameters");this.int=e}}return(0,s.default)(r,[{key:"uIntBytes",value:function(){return new Uint8Array(this.int.toArray(256).value)}},{key:"intBytes",value:function(){var e=this.int.toArray(256).value;return 127<e[0]&&e.splice(0,0,0),-1===this.signum()&&(e[0]+=128),new Uint8Array(e)}},{key:"varIntBytes",value:function(){var e=this.int.toArray(128).value;return 32<e[0]&&(e[0]-=128,e.splice(0,0,1)),-1===this.signum()&&(e[0]+=64),e[e.length-1]+=128,new Uint8Array(e)}},{key:"varUIntBytes",value:function(){var e=new Uint8Array(this.int.toArray(128).value);return e[e.length-1]+=128,e}},{key:"isZero",value:function(){return this.int.isZero()}},{key:"negate",value:function(){this.int.negate()}},{key:"add",value:function(e){return new r(e instanceof r?this.int.add(e.int):this.int.add(e))}},{key:"subtract",value:function(e){return new r(e instanceof r?this.int.add(e.int):this.int.add(e))}},{key:"multiply",value:function(e){return new r(e instanceof r?this.int.multiply(e.int):this.int.multiply(e))}},{key:"divide",value:function(e){return new r(e instanceof r?this.int.divide(e.int):this.int.divide(e))}},{key:"mathPow",value:function(e){var t=a(e);return new r(this.int.pow(t))}},{key:"lessThan",value:function(e){return this.int.lesser(e.int)}},{key:"greaterThan",value:function(e){return this.int.greater(e.int)}},{key:"equals",value:function(e){return this.int.equals(e.int)}},{key:"geq",value:function(e){return this.int.geq(e.int)}},{key:"leq",value:function(e){return this.int.leq(e.int)}},{key:"numberValue",value:function(){return this.int.toJSNumber()}},{key:"toString",value:function(){return this.int.toString(10)}},{key:"signum",value:function(){return this.int.isZero()?0<1/this.int.valueOf()?1:-1:this.int.isPositive()?1:-1}}],[{key:"fromUIntBytes",value:function(e){return new r(a.fromArray(e,256,!1))}},{key:"fromIntBytes",value:function(e,t){return new r(a.fromArray(e,256,t))}},{key:"fromVarIntBytes",value:function(e,t){return new r(a.fromArray(e,128,t))}},{key:"fromVarUIntBytes",value:function(e){return new r(a.fromArray(e,128,!1))}}]),r}();(r.LongInt=u)._ZERO=new u(0)},{"./BigInteger.js":2,"./util":30,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],13:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function s(e){(0,i.default)(this,s),this.writeable=e}return(0,a.default)(s,[{key:"writeSignedInt",value:function(e){for(var t=s.getSignedIntSize(e),r=Math.abs(e),n=new Uint8Array(t),i=n.length;128<=r;)n[--i]=255&r,r>>>=8;n[--i]=255&r,1/e<0&&(n[0]|=128),this.writeable.writeBytes(n)}},{key:"writeUnsignedInt",value:function(e){for(var t=s.getUnsignedIntSize(e),r=new Uint8Array(t),n=e,i=r.length;0<n;)r[--i]=n%256,n=Math.trunc(n/256);this.writeable.writeBytes(r)}},{key:"writeVariableLengthSignedInt",value:function(e){for(var t=new Uint8Array(s.getVariableLengthSignedIntSize(e)),r=Math.abs(e),n=t.length-1;64<=r;)t[n--]=127&r,r>>>=7;t[n]=r,1/e<0&&(t[n]|=64),t[t.length-1]|=128,this.writeable.writeBytes(t)}},{key:"writeVariableLengthUnsignedInt",value:function(e){var t=new Uint8Array(s.getVariableLengthUnsignedIntSize(e)),r=e,n=t.length;for(t[--n]=127&r|128,r>>>=7;0<r;)t[--n]=127&r,r>>>=7;this.writeable.writeBytes(t)}},{key:"writeByte",value:function(e){this.writeable.writeByte(e)}},{key:"writeBytes",value:function(e){this.writeable.writeBytes(e)}},{key:"getBytes",value:function(){return this.writeable.getBytes()}}],[{key:"getSignedIntSize",value:function(e){if(0===e)return 1;var t=Math.abs(e),r=Math.floor(Math.log2(t)),n=Math.ceil(r/8);return r%8==0&&n++,n}},{key:"getUnsignedIntSize",value:function(e){if(0===e)return 1;var t=Math.floor(Math.log2(e))+1;return Math.ceil(t/8)}},{key:"getVariableLengthSignedIntSize",value:function(e){var t=Math.abs(e);if(0===t)return 1;var r=Math.floor(Math.log2(t))+1,n=Math.floor(r/7);return Math.ceil((r+n+1+1)/8)}},{key:"getVariableLengthUnsignedIntSize",value:function(e){if(0===e)return 1;var t=Math.floor(Math.log2(e))+1,r=Math.ceil(t/7);return Math.ceil((t+r)/8)}}]),s}();r.LowLevelBinaryWriter=s},{"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],14:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),w=n(e("@babel/runtime/helpers/slicedToArray")),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var a=e("./IonBinary"),o=e("./IonUnicode"),m=e("./IonDecimal"),u=e("./IonTypes"),l=e("./IonConstants"),T=e("./IonLongInt"),g=e("./IonTimestamp");function h(e){return e>>a.TYPE_SHIFT&a.NIBBLE_MASK}var c=[],_=l.IVM.sid,f=(l.IVM.binary[0],l.IVM.binary[1]),p=l.IVM.binary[2],d=l.IVM.binary[3],y=function(){function b(e){(0,i.default)(this,b),this._raw_type=-1,this._len=-1,this._curr=void 0,this._null=!1,this._fid=-1,this._as=-1,this._ae=-1,this._a=[],this._ts=[20],this._in_struct=!1,this._in=e}return(0,s.default)(b,[{key:"read_binary_float",value:function(){return b.readFloatFrom(this._in,this._len)}},{key:"readVarUnsignedInt",value:function(){return b.readVarUnsignedIntFrom(this._in)}},{key:"readVarSignedInt",value:function(){return b.readVarSignedIntFrom(this._in)}},{key:"readVarLongInt",value:function(){var e=[],t=this._in.next(),r=0!=(64&t),n=128&t;for(e.push(63&t);!n;)n=128&(t=this._in.next()),t&=127,e.push(t);return T.LongInt.fromVarIntBytes(e,r)}},{key:"readSignedInt",value:function(){return b.readSignedIntFrom(this._in,this._len)}},{key:"readUnsignedInt",value:function(){return b.readUnsignedIntFrom(this._in,this._len)}},{key:"readUnsignedLongInt",value:function(){return b.readUnsignedLongIntFrom(this._in,this._len)}},{key:"read_decimal_value",value:function(){return b.readDecimalValueFrom(this._in,this._len)}},{key:"read_timestamp_value",value:function(){if(!(0<this._len))return null;var e,t,r,n,i,s,a,o=m.Decimal.ZERO,u=g.TimestampPrecision.YEAR,l=this._in.position()+this._len;if(e=this.readVarSignedInt(),!(this._in.position()<l))throw new Error("Timestamps must include a year.");if(t=this.readVarUnsignedInt(),this._in.position()<l&&(r=this.readVarUnsignedInt(),u=g.TimestampPrecision.MONTH),this._in.position()<l&&(n=this.readVarUnsignedInt(),u=g.TimestampPrecision.DAY),this._in.position()<l){if(i=this.readVarUnsignedInt(),this._in.position()>=l)throw new Error("Timestamps with an hour must include a minute.");s=this.readVarUnsignedInt(),u=g.TimestampPrecision.HOUR_AND_MINUTE}if(this._in.position()<l&&(a=this.readVarUnsignedInt(),u=g.TimestampPrecision.SECONDS),this._in.position()<l){var h=this.readVarSignedInt(),c=T.LongInt._ZERO;this._in.position()<l&&(c=b.readSignedIntFrom(this._in,l-this._in.position()));var _=m.Decimal._fromLongIntCoefficient(c,h),f=g.Timestamp._splitSecondsDecimal(_),p=(0,w.default)(f,2),d=(p[0],p[1]);o=m.Decimal.parse(a+"."+d)}var y=Date.UTC(t,r?r-1:0,n||1,i||0,s||0,a||0,0);y=g.Timestamp._adjustMsSinceEpochIfNeeded(t,y);var v=new Date(y);return g.Timestamp._valueOf(v,e,o,u)}},{key:"read_string_value",value:function(){return o.decodeUtf8(this._in.chunk(this._len))}},{key:"clear_value",value:function(){this._raw_type=-1,this._curr=void 0,this._a=c,this._as=-1,this._null=!1,this._fid=-1,this._len=-1}},{key:"load_length",value:function(e){var t=this;switch(t._len=function(e){return e&a.NIBBLE_MASK}(e),t._len){case 1:h(e)===a.TB_STRUCT&&(t._len=this.readVarUnsignedInt()),t._null=!1;break;case a.LEN_VAR:t._null=!1,t._len=this.readVarUnsignedInt();break;case a.LEN_NULL:t._null=!0,t._len=0;break;default:t._null=!1}}},{key:"load_next",value:function(){var e,t,r=this;if(r._as=-1,!r._in.is_empty()){switch(e=h(t=r._in.next()),r.load_length(t),e===a.TB_ANNOTATION&&(e=r._len<1&&0===r.depth()?r.load_ivm():r.load_annotations()),e){case a.TB_NULL:r._null=!0;break;case a.TB_BOOL:0!==r._len&&1!==r._len||(r._curr=1===r._len,r._len=0)}return r._raw_type=e}r.clear_value()}},{key:"load_annotations",value:function(){var e,t,r=this;return r._len<1&&0===r.depth()?r.load_ivm():(t=this.readVarUnsignedInt(),r._as=r._in.position(),r._in.skip(t),r._ae=r._in.position(),e=r._in.next(),r.load_length(e),h(e))}},{key:"load_ivm",value:function(){var e=this._in;if(e.next()!==f)throw new Error("invalid binary Ion at "+e.position());if(e.next()!==p)throw new Error("invalid binary Ion at "+e.position());if(e.next()!==d)throw new Error("invalid binary Ion at "+e.position());return this._curr=_,this._len=0,a.TB_SYMBOL}},{key:"load_annotation_values",value:function(){var e,t,r,n,i;if(!((r=this._as)<0)){for(i=[],n=this._ae,e=0;r<n;)t=this._in.valueAt(r),r++,e=e<<7|127&t,0!=(128&t)&&(i.push(e),e=0);this._a=i}}},{key:"_readIntegerMagnitude",value:function(){if(0===this._len)return 0;if(this._len<=3||4===this._len&&this._in.peek()<128)return this.readUnsignedInt();throw new Error("Attempted to read an integer that could not be stored in 31 bits.")}},{key:"load_value",value:function(){if(null==this._curr){if(this.isNull())return null;switch(this._raw_type){case a.TB_BOOL:break;case a.TB_INT:this._curr=this._readIntegerMagnitude();break;case a.TB_NEG_INT:this._curr=-this._readIntegerMagnitude();break;case a.TB_FLOAT:this._curr=this.read_binary_float();break;case a.TB_DECIMAL:0===this._len?this._curr=m.Decimal.ZERO:this._curr=this.read_decimal_value();break;case a.TB_TIMESTAMP:this._curr=this.read_timestamp_value();break;case a.TB_SYMBOL:this._curr=this.readUnsignedInt();break;case a.TB_STRING:this._curr=this.read_string_value();break;case a.TB_CLOB:case a.TB_BLOB:if(this.isNull())break;this._curr=this._in.chunk(this._len);break;default:throw new Error("Unexpected type: "+this._raw_type)}}}},{key:"next",value:function(){return void 0===this._curr&&0<this._len?this._in.skip(this._len):this.clear_value(),this._in_struct&&(this._fid=this.readVarUnsignedInt()),this.load_next()}},{key:"stepIn",value:function(){var e,t,r=this;switch(r._raw_type){case a.TB_STRUCT:case a.TB_LIST:case a.TB_SEXP:break;default:throw new Error("you can only 'stepIn' to a container")}e=r._in.getRemaining()-r._len,t=function(e,t){return t<<5|31&e}(r._raw_type,e),r._ts.push(t),r._in_struct=r._raw_type===a.TB_STRUCT,r._in.setRemaining(r._len),r.clear_value()}},{key:"stepOut",value:function(){var e,t,r,n=this;if(n._ts.length<2)throw new Error("you can't stepOut unless you stepped in");t=function(e){return e>>>5}(n._ts.pop()),e=function(e){return 31&e}(n._ts[n._ts.length-1]),n._in_struct=e===a.TB_STRUCT,n.clear_value(),r=n._in.getRemaining(),n._in.skip(r),n._in.setRemaining(t)}},{key:"isNull",value:function(){return this._null}},{key:"depth",value:function(){return this._ts.length-1}},{key:"getFieldId",value:function(){return this._fid}},{key:"hasAnnotations",value:function(){return 0<=this._as}},{key:"getAnnotations",value:function(){return void 0!==this._a&&0!==this._a.length||this.load_annotation_values(),this._a}},{key:"getAnnotation",value:function(e){return void 0!==this._a&&0!==this._a.length||this.load_annotation_values(),this._a[e]}},{key:"ionType",value:function(){return function(e){switch(e){case a.TB_NULL:return u.IonTypes.NULL;case a.TB_BOOL:return u.IonTypes.BOOL;case a.TB_INT:case a.TB_NEG_INT:return u.IonTypes.INT;case a.TB_FLOAT:return u.IonTypes.FLOAT;case a.TB_DECIMAL:return u.IonTypes.DECIMAL;case a.TB_TIMESTAMP:return u.IonTypes.TIMESTAMP;case a.TB_SYMBOL:return u.IonTypes.SYMBOL;case a.TB_STRING:return u.IonTypes.STRING;case a.TB_CLOB:return u.IonTypes.CLOB;case a.TB_BLOB:return u.IonTypes.BLOB;case a.TB_SEXP:return u.IonTypes.SEXP;case a.TB_LIST:return u.IonTypes.LIST;case a.TB_STRUCT:return u.IonTypes.STRUCT;default:return}}(this._raw_type)}},{key:"_getSid",value:function(){return this.load_value(),this._raw_type==a.TB_SYMBOL?void 0===this._curr?null:this._curr:null}},{key:"_stringRepresentation",value:function(){var e=this;switch(e._raw_type){case a.TB_NULL:case a.TB_BOOL:case a.TB_INT:case a.TB_NEG_INT:case a.TB_FLOAT:case a.TB_DECIMAL:case a.TB_TIMESTAMP:case a.TB_SYMBOL:case a.TB_STRING:break;default:throw new Error("Cannot convert to string.")}if(e.isNull())switch(e._raw_type){case a.TB_BOOL:case a.TB_INT:case a.TB_NEG_INT:case a.TB_FLOAT:case a.TB_DECIMAL:case a.TB_TIMESTAMP:case a.TB_SYMBOL:case a.TB_STRING:e.ionType().name}else switch(e.load_value(),e._raw_type){case a.TB_BOOL:case a.TB_INT:case a.TB_NEG_INT:case a.TB_DECIMAL:case a.TB_TIMESTAMP:return e._curr.toString();case a.TB_FLOAT:var t=e.numberValue().toString();if(-1===t.indexOf("e"))return t+"e0";case a.TB_STRING:return e._null?null:e._curr}}},{key:"byteValue",value:function(){switch(this._raw_type){case a.TB_NULL:return null;case a.TB_CLOB:case a.TB_BLOB:return this.isNull()?null:(this.load_value(),this._curr);default:throw new Error("Current value is not a blob or clob.")}}},{key:"booleanValue",value:function(){switch(this._raw_type){case a.TB_NULL:return null;case a.TB_BOOL:return this.isNull()?null:this._curr}throw new Error("Current value is not a Boolean.")}},{key:"decimalValue",value:function(){switch(this._raw_type){case a.TB_NULL:return null;case a.TB_DECIMAL:return this.isNull()?null:(this.load_value(),this._curr)}throw new Error("Current value is not a decimal.")}},{key:"numberValue",value:function(){switch(this._raw_type){case a.TB_NULL:return null;case a.TB_INT:case a.TB_NEG_INT:case a.TB_FLOAT:return this.isNull()?null:(this.load_value(),this._curr);default:throw new Error("Current value is not a float or int.")}}},{key:"stringValue",value:function(){switch(this._raw_type){case a.TB_NULL:return null;case a.TB_STRING:case a.TB_SYMBOL:return this.isNull()?null:(this.load_value(),this._curr)}throw new Error("Current value is not a string or symbol.")}},{key:"timestampValue",value:function(){switch(this._raw_type){case a.TB_NULL:return null;case a.TB_TIMESTAMP:return this.isNull()?null:(this.load_value(),this._curr)}throw new Error("Current value is not a timestamp.")}}],[{key:"readFloatFrom",value:function(e,t){switch(t){case 0:return 0;case 4:return new DataView(e.chunk(4).buffer).getFloat32(0,!1);case 8:return new DataView(e.chunk(8).buffer).getFloat64(0,!1);case 15:return null;default:throw new Error("Illegal float length: "+t)}}},{key:"readVarUnsignedIntFrom",value:function(e){for(var t,r=0,n=0;n=n<<7|127&(t=e.next()),r+=7,!(128&t););if(31<r)throw new Error("VarUInt values larger than 31 bits must be read using LongInt.");return n}},{key:"readVarSignedIntFrom",value:function(e){var t,r=e.next(),n=64&r,i=128&r;r&=63;for(var s=6;!i;)i=128&(t=e.next()),r<<=7,r|=t&=127,s+=7;if(32<s)throw new Error("VarInt values larger than 32 bits must be read using LongInt");return n?-r:r}},{key:"readSignedIntFrom",value:function(e,t){if(0==t)return new T.LongInt(0);var r=e.view(t),n=128==(128&r[0]),i=Array.prototype.slice.call(r);return i[0]=127&r[0],T.LongInt.fromIntBytes(i,n)}},{key:"readUnsignedIntFrom",value:function(e,t){var r,n=0,i=0;if(t<1)return 0;for(;i<t;)i++,n<<=8,n|=255&(r=e.next());if(4<t||n<0)throw new Error("Attempted to read an unsigned int that was larger than 31 bits. Use readUnsignedLongIntFrom instead. UInt size: "+t+", value: "+n);if(-1===r)throw new Error("Ran out of data while reading a "+t+"-byte unsigned int.");return n}},{key:"readUnsignedLongIntFrom",value:function(e,t){return T.LongInt.fromUIntBytes(Array.prototype.slice.call(e.view(t)))}},{key:"readDecimalValueFrom",value:function(e,t){var r,n,i=e.position();n=b.readVarSignedIntFrom(e);var s=e.position()-i;return r=b.readSignedIntFrom(e,t-s),m.Decimal._fromLongIntCoefficient(r,n)}}]),b}();r.ParserBinaryRaw=y},{"./IonBinary":4,"./IonConstants":8,"./IonDecimal":9,"./IonLongInt":12,"./IonTimestamp":25,"./IonTypes":27,"./IonUnicode":28,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/slicedToArray":45}],15:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),s=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var u=e("./IonText"),a=e("./IonTypes"),l=e("./IonText"),o=13,h=10,c="/".charCodeAt(0),_='"'.charCodeAt(0),f="{".charCodeAt(0),p=_,d=[105,110,102];function y(e){if("null"===e)return 1;if("true"===e)return 2;if("false"===e)return 2;if("nan"===e)return 6;if("+inf"===e)return 6;if("-inf"===e)return 6;throw new Error("Unknown keyword: "+e+".")}function v(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 98:return 11;case 99:return 12;case 100:return 13;case 101:return 14;case 102:return 15;case 65:return 10;case 66:return 11;case 67:return 12;case 68:return 13;case 69:return 14;case 70:return 15}throw new Error("Unexpected bad hex digit in checked data.")}function b(e,t){return e==o?t:e==h?t:!!u.is_whitespace(e)||!(e<32)}r.get_ion_type=function(e){switch(e){case-1:case-2:return null;case 1:return a.IonTypes.NULL;case 2:return a.IonTypes.BOOL;case 3:case 4:return a.IonTypes.INT;case 5:case 6:return a.IonTypes.FLOAT;case 7:return a.IonTypes.DECIMAL;case 8:return a.IonTypes.TIMESTAMP;case 9:case 10:case 11:return a.IonTypes.SYMBOL;case 12:case 13:return a.IonTypes.STRING;case 14:case 15:return a.IonTypes.CLOB;case 16:return a.IonTypes.BLOB;case 17:return a.IonTypes.SEXP;case 18:return a.IonTypes.LIST;case 19:return a.IonTypes.STRUCT;default:throw new Error("Unknown type: "+String(e)+".")}};var w=function(){function r(e){(0,s.default)(this,r),this._value_null=!1,this._curr_null=!1,this._read_value_helper_minus=function(e,t,r){var n=void 0,i=this._peek();105==i?(i=this._peek("inf"),u.isNumericTerminator(i)?n=this._read_minus_inf:t&&(n=this._read_operator_symbol)):u.is_digit(i)?n=this._read_number:t&&(n=this._read_operator_symbol),null!=n?(this._ops.unshift(n),this._unread(e)):this._error("operator symbols are not valid outside of sexps")},this._read_string_helper=function(e,t){var r;for(this._start=this._in.position();;)if(92==(r=this._read()))this._read_string_escape_sequence();else{if(r==e)break;if(!b(r,t))throw new Error("invalid character "+r+" in string")}},this._in=e,this._ops=[this._read_datagram_values],this._value_type=-2,this._value=[],this._start=-1,this._end=-1,this._esc_len=-1,this._curr=-1,this._ann=[],this._msg="",this._fieldname=null,this._fieldnameType=null;function t(e,t){for(var r,n=e.length;0<n;)n--,r=e.charCodeAt(n),i[r]=t}var i={40:this._read_value_helper_paren,91:this._read_value_helper_square,123:this._read_value_helper_curly,43:this._read_value_helper_plus,45:this._read_value_helper_minus,39:this._read_value_helper_single,34:this._read_value_helper_double};t("0123456789",this._read_value_helper_digit),t("_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this._read_value_helper_letter),t("!#%&*+-./;<=>?@^`|~",this._read_value_helper_operator),i[43]=this._read_value_helper_plus,i[45]=this._read_value_helper_minus,this._read_value_helper_helpers=i}return(0,i.default)(r,[{key:"fieldName",value:function(){return this._fieldname}},{key:"fieldNameType",value:function(){return this._fieldnameType}},{key:"annotations",value:function(){return this._ann}},{key:"_read_datagram_values",value:function(){-1==this._peek()?this._value_push(-1):(this._ops.unshift(this._read_datagram_values),this._ops.unshift(this._read_value))}},{key:"_read_sexp_values",value:function(){var e=this._read_after_whitespace(!0);if(41==e)this._value_push(-1);else{if(-1===e)throw new Error("Expected closing ).");this._unread(e),this._ops.unshift(this._read_sexp_values),this._ops.unshift(this._read_sexp_value)}}},{key:"_read_list_values",value:function(){var e=this._read_after_whitespace(!0);93==e?this._value_push(-1):(this._unread(e),this._ops.unshift(this._read_list_comma),this._ops.unshift(this._read_value))}},{key:"_read_struct_values",value:function(){var e=this._done_with_error,t=this._read_after_whitespace(!0);switch(t){case 39:e=this._read_string1,-2!=this._peek("''")&&(e=this._read_string3);break;case _:e=this._read_string2;break;case 125:return void this._value_push(-1);default:u.is_letter(t)&&(e=this._read_symbol)}e===this._done_with_error?this._error("expected field name (or close struct '}') not found"):(e.call(this),this._load_field_name(),58!=(t=this._read_after_whitespace(!0))&&this._error("expected ':'"),this._ops.unshift(this._read_struct_comma),this._ops.unshift(this._read_value))}},{key:"_read_list_comma",value:function(){var e=this._read_after_whitespace(!0);44==e?93==(e=this._read_after_whitespace(!0))?this._value_push(-1):(this._unread(e),this._ops.unshift(this._read_list_comma),this._ops.unshift(this._read_value)):93==e?this._value_push(-1):this._error("expected ',' or ']'")}},{key:"_read_struct_comma",value:function(){var e=this._read_after_whitespace(!0);44==e?125==(e=this._read_after_whitespace(!0))?this._value_push(-1):(this._unread(e),this._ops.unshift(this._read_struct_values)):125==e?this._value_push(-1):this._error("expected ',' or '}'")}},{key:"clearFieldName",value:function(){this._fieldname=null,this._fieldnameType=null}},{key:"_load_field_name",value:function(){this._fieldnameType=this._value_pop();var e=this.get_value_as_string(this._fieldnameType);switch(this._fieldnameType){case 9:if(l.is_keyword(e))throw new Error("can't use '"+e+"' as a fieldname without quotes");case 11:case 12:case 13:this._fieldname=e;break;default:throw new Error("invalid fieldname"+e)}}},{key:"_read_value",value:function(){this._read_value_helper(!1,this._read_value)}},{key:"_read_sexp_value",value:function(){this._read_value_helper(!0,this._read_sexp_value)}},{key:"_read_value_helper",value:function(e,t){var r=this._read_after_whitespace(!0);if(-1==r)this._read_value_helper_EOF(r,e,t);else{var n=this._read_value_helper_helpers[r];null!=n?n.call(this,r,e,t):this._error("unexpected character '"+u.asAscii(r)+"'")}}},{key:"_read_value_helper_EOF",value:function(e,t,r){this._ops.unshift(this._done)}},{key:"_read_value_helper_paren",value:function(e,t,r){this._value_push(17),this._ops.unshift(this._read_sexp_values)}},{key:"_read_value_helper_square",value:function(e,t,r){this._value_push(18),this._ops.unshift(this._read_list_values)}},{key:"_read_value_helper_curly",value:function(e,t,r){var n,i=this._read();i==f?39==(n=this._read_after_whitespace(!1))?this._ops.unshift(this._read_clob_string3):n==_?this._ops.unshift(this._read_clob_string2):(this._unread(n),this._ops.unshift(this._read_blob)):(this._unread(i),this._value_push(19),this._ops.unshift(this._read_struct_values))}},{key:"_read_value_helper_plus",value:function(e,t,r){var n=this._peek("inf");this._unread(e),u.isNumericTerminator(n)?this._ops.unshift(this._read_plus_inf):t?this._ops.unshift(this._read_operator_symbol):this._error("unexpected '+'")}},{key:"_read_value_helper_digit",value:function(e,t,r){var n=this._peek_4_digits(e);this._unread(e),84==n||45==n?this._ops.unshift(this._readTimestamp):this._ops.unshift(this._read_number)}},{key:"_read_value_helper_single",value:function(e,t,r){var n;-2!=this._peek("''")?(n=this._read_string3).call(this):((n=this._read_string1).call(this),this._test_string_as_annotation(n)&&this._ops.unshift(r))}},{key:"_read_value_helper_double",value:function(e,t,r){this._ops.unshift(this._read_string2)}},{key:"_read_value_helper_letter",value:function(e,t,r){this._start;this._read_symbol();var n=this._value_pop();if(9!=n)throw new Error("Expecting symbol here.");var i=this.get_value_as_string(n);if(l.is_keyword(i)){var s=y(i);if(1===s){if(this._value_null=!0,46===this._peek()){this._read();var a=this._read();if(!0!==u.is_letter(a))throw new Error("Expected type name after 'null.'");if(this._read_symbol(),9!==this._value_pop())throw new Error("Expected type name after 'null.'");s=function(e){if("null"===e)return 1;if("bool"===e)return 2;if("int"===e)return 3;if("float"===e)return 5;if("decimal"===e)return 7;if("timestamp"===e)return 8;if("symbol"===e)return 9;if("string"===e)return 12;if("clob"===e)return 14;if("blob"===e)return 16;if("sexp"===e)return 17;if("list"===e)return 18;if("struct"===e)return 19;throw new Error("Unknown type: "+e+".")}(i=this.get_value_as_string(9))}this._start=-1,this._end=-1}this._value_push(s)}else{var o=this._read_after_whitespace(!0);if(58==o&&58==this._peek())this._read(),this._ann.push(i),this._ops.unshift(r);else{this._unread(o),this._value_push(9)}}}},{key:"_read_value_helper_operator",value:function(e,t,r){t?(this._unread(e),this._ops.unshift(this._read_operator_symbol)):this._error("unexpected operator character")}},{key:"_done",value:function(){this._value_push(-1)}},{key:"_done_with_error",value:function(){throw this._value_push(-2),new Error(this._error_msg)}},{key:"_read_number",value:function(){var e,t;if(this._start=this._in.position(),45==(e=this._read())&&(e=this._read()),48==e){if(120==(e=this._peek())||88==e)return void this._read_hex_int();u.is_digit(e)&&this._error("leading zeros are not allowed"),e=48}t=3,46==(e=this._read_required_digits(e))&&(t=7,e=this._read_optional_digits(this._read())),u.isNumericTerminator(e)||(100==e||68==e?(t=7,e=this._read_exponent()):101!=e&&69!=e&&102!=e&&70!=e||(t=5,e=this._read_exponent())),u.isNumericTerminator(e)?(this._unread(e),this._end=this._in.position(),this._value_push(t)):this._error("invalid character after number")}},{key:"_read_hex_int",value:function(){var e=this._read();120!=e&&88!=e||(e=this._read(),e=this._read_required_hex_digits(e)),u.isNumericTerminator(e)?(this._unread(e),this._end=this._in.position(),this._value_push(4)):this._error("invalid character after number")}},{key:"_read_exponent",value:function(){var e=this._read();return 45!=e&&43!=e||(e=this._read()),e=this._read_required_digits(e)}},{key:"_read_plus_inf",value:function(){this._start=this._in.position(),43==this._read()?this._read_inf_helper():this._error("expected +inf")}},{key:"_read_minus_inf",value:function(){this._start=this._in.position(),45==this._read()?this._read_inf_helper():this._error("expected -inf")}},{key:"_read_inf_helper",value:function(){var e;for(e=0;e<3;e++)if(this._read()!=d[e])return void this._error("expected 'inf'");u.isNumericTerminator(this._peek())?(this._end=this._in.position(),this._value_push(6)):this._error("invalid numeric terminator after 'inf'")}},{key:"_readTimestamp",value:function(){this._start=this._in.position();var e=this._readPastNDigits(4);if(84===e)return this._end=this._in.position(),void this._value_push(8);if(45!==e)throw new Error("Timestamp year must be followed by '-' or 'T'.");if(84===(e=this._readPastNDigits(2)))return this._end=this._in.position(),void this._value_push(8);if(45!==e)throw new Error("Timestamp month must be followed by '-' or 'T'.");if(e=this._readPastNDigits(2),u.isNumericTerminator(e))return this._unread(e),this._end=this._in.position(),void this._value_push(8);if(84!==e)throw new Error("Timestamp day must be followed by a numeric stop character .");var t=this._in.peek();if(u.isNumericTerminator(t))return this._end=this._in.position(),void this._value_push(8);if(!u.is_digit(t))throw new Error("Timestamp DATE must be followed by numeric terminator or additional TIME digits.");if(58!==(e=this._readPastNDigits(2)))throw new Error("Timestamp time(hr:min) requires format of 00:00");if(58===(e=this._readPastNDigits(2))&&46===(e=this._readPastNDigits(2))){if(!u.is_digit(this._read()))throw new Error("W3C timestamp spec requires atleast one digit after decimal point.");for(;u.is_digit(e=this._read()););}if(90===e){if(!u.isNumericTerminator(this._peek()))throw new Error("Illegal terminator after Zulu offset.");return this._end=this._in.position(),void this._value_push(8)}if(43!==e&&45!==e)throw new Error("Timestamps require an offset.");if(58!==(e=this._readPastNDigits(2)))throw new Error("Timestamp offset(hr:min) requires format of +/-00:00.");if(this._readNDigits(2),e=this._peek(),!u.isNumericTerminator(e))throw new Error("Improperly formatted timestamp.");this._end=this._in.position(),this._value_push(8)}},{key:"_read_symbol",value:function(){var e;for(this._start=this._in.position()-1;e=this._read(),u.is_letter_or_digit(e););this._unread(e),this._end=this._in.position(),this._value_push(9)}},{key:"_read_operator_symbol",value:function(){var e;for(this._start=this._in.position();e=this._read(),u.is_operator_char(e););this._end=this._in.position()-1,this._unread(e),this._value_push(10)}},{key:"_read_string1",value:function(){this._read_string_helper(39,!1),this._end=this._in.position()-1,this._value_push(11)}},{key:"_read_string2",value:function(){this._read_string_helper(_,!1),this._end=this._in.position()-1,this._value_push(12)}},{key:"_read_string3",value:function(e){var t;for(void 0===e&&(e=!0),this._unread(this._peek("")),this._start=this._in.position()+3;-2!==this._peek("'''");this._in.unread(this._read_after_whitespace(e))){for(var r=0;r<3;r++)this._read();for(;-2===this._peek("'''");){if(92==(t=this._read())&&this._read_string_escape_sequence(),-1===t)throw new Error("Closing triple quotes not found.");if(!b(t,!0))throw new Error("invalid character "+t+" in string")}this._end=this._in.position();for(var n=0;n<3;n++)this._read()}this._value_push(13)}},{key:"verifyTriple",value:function(e){return 39===this._in.valueAt(e)&&39===this._in.valueAt(e+1)&&39===this._in.valueAt(e+2)}},{key:"_read_string_escape_sequence",value:function(){var e=this._read();switch(e){case 48:case 97:case 98:case 116:case 110:case 102:case 114:case 118:case p:case 39:case 63:case 92:case 47:case 10:break;case 13:10!=(e=this._read())&&this._unread(e);break;case 120:e=this._read_N_hexdigits(2),this._unread(e);break;case 117:e=this._read_N_hexdigits(4),this._unread(e);break;case 85:e=this._read_N_hexdigits(8),this._unread(e);break;default:this._error("unexpected character: "+e+" after escape slash")}}},{key:"_test_string_as_annotation",value:function(e){var t,r,n=this._value_pop();return 11!=n&&13!=n&&this._error("expecting quoted symbol here"),t=this.get_value_as_string(n),58==(r=this._read_after_whitespace(!0))&&58==this._peek()?(this._read(),this._ann.push(t),!0):(this._unread(r),this._value_push(n),!1)}},{key:"_read_clob_string2",value:function(){this._read_string2(),12!=this._value_pop()&&this._error("string expected"),this._value_push(14),this._ops.unshift(this._read_close_double_brace)}},{key:"_read_clob_string3",value:function(){this._read_string3(!1),13!=this._value_pop()&&this._error("string expected"),this._value_push(15),this._ops.unshift(this._read_close_double_brace)}},{key:"_read_blob",value:function(){var e,t=0,r=0;for(this._start=this._in.position();;)if(e=this._read(),u.is_base64_char(e))t++,this._end=this._in.position();else if(!u.is_whitespace(e))break;for(;61==e;)r++,e=this._read_after_whitespace(!1);if(125!=e||125!=this._read())throw new Error("Invalid blob");if(!function(e,t){return!(2<t)&&0==(e+t&3)}(t,r))throw new Error("Invalid base64 value");this._value_push(16)}},{key:"_read_comma",value:function(){44!=this._read_after_whitespace(!0)&&this._error("expected ','")}},{key:"_read_close_double_brace",value:function(){125==this._read_after_whitespace(!1)&&125==this._read()||this._error("expected '}}'")}},{key:"isNull",value:function(){return this._curr_null}},{key:"numberValue",value:function(){if(this.isNull())return null;var e=this.get_value_as_string(this._curr);switch(this._curr){case 3:return parseInt(e,10);case 4:return parseInt(e,16);case 5:return Number(e);case 6:if("+inf"==e)return Number.POSITIVE_INFINITY;if("-inf"==e)return Number.NEGATIVE_INFINITY;if("nan"==e)return Number.NaN;default:throw new Error("can't convert to number")}}},{key:"booleanValue",value:function(){if(this.isNull())return null;var e=this.get_value_as_string(2);return"true"==e||"false"!=e&&void 0}},{key:"isHighSurrogate",value:function(e){return 55296<=e&&e<=56319}},{key:"isLowSurrogate",value:function(e){return 56320<=e&&e<=57343}},{key:"get_value_as_string",value:function(e){var t,r,n,i,s="";switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:for(t=this._start;t<this._end;t++)s+=String.fromCharCode(this._in.valueAt(t));break;case 16:for(t=this._start;t<this._end;t++)r=this._in.valueAt(t),u.is_base64_char(r)&&(s+=String.fromCharCode(r));break;case 11:case 12:for(t=this._start;t<this._end;t++)if(92==(r=this._in.valueAt(t))&&(r=this._read_escape_sequence(t,this._end),t+=this._esc_len),this.isHighSurrogate(r)){t++;var a=this._in.valueAt(t);if(92==a&&(a=this._read_escape_sequence(t,this._end),t+=this._esc_len),!this.isLowSurrogate(a))throw new Error("illegal high surrogate"+r);s+=r+a,t++}else{if(this.isLowSurrogate(r))throw new Error("illegal low surrogate: "+r);s+=String.fromCharCode(r)}break;case 13:for(i=!0,t=this._start;t<this._end;t++)if(92==(r=this._in.valueAt(t))&&(r=this._read_escape_sequence(t,this._end),t+=this._esc_len),this.isHighSurrogate(r)){t++;var o=this._in.valueAt(t);if(92==o&&(o=this._read_escape_sequence(t,this._end),t+=this._esc_len),!this.isLowSurrogate(o))throw new Error("illegal high surrogate"+r);s+=r+o,t++}else{if(this.isLowSurrogate(r))throw new Error("illegal low surrogate: "+r);39===r&&this.verifyTriple(t)?t=this._skip_triple_quote_gap(t,this._end,i):s+=String.fromCharCode(r)}break;case 14:for(t=this._start;t<this._end;t++)if(92==(r=this._in.valueAt(t)))s+=String.fromCharCode(this.readClobEscapes(t,this._end)),t+=this._esc_len;else{if(!(r<128))throw new Error("Non-Ascii values illegal within clob.");s+=String.fromCharCode(r)}break;case 15:for(i=!1,t=this._start;t<this._end;t++)if(92===(r=this._in.valueAt(t)))0<=(n=this.readClobEscapes(t,this._end))&&(s+=String.fromCharCode(n)),t+=this._esc_len;else if(39===r)this.verifyTriple(t)?t=this._skip_triple_quote_gap(t,this._end,i):s+=String.fromCharCode(r);else{if(!(r<128))throw new Error("Non-Ascii values illegal within clob.");s+=String.fromCharCode(r)}break;default:throw new Error("can't get this value as a string")}return s}},{key:"indexWhiteSpace",value:function(e,t){var r=this._in.valueAt(e);if(t){for(;l.is_whitespace(r)||r===c;r=this._in.valueAt(e++))if(r===c)switch(r=this._in.valueAt(e++)){case c:e=this.indexToNewLine(e);break;case 42:e=this.indexToCloseComment(e);break;default:e--}}else for(;l.is_whitespace(r);r=this._in.valueAt(e++));return e}},{key:"indexToNewLine",value:function(e){for(var t=this._in.valueAt(e);-1!==t&&t!==h;){if(t===o&&this._in.valueAt(e+1)!==h)return e;t=this._in.valueAt(e++)}return e}},{key:"indexToCloseComment",value:function(e){for(;42!==this._in.valueAt(e)&&this._in.valueAt(e+1)!==c;)e++;return e}},{key:"_skip_triple_quote_gap",value:function(e,t,r){var n=e+3;this._in.valueAt(n);return(n=this.indexWhiteSpace(n,r))+2<=t&&this.verifyTriple(n)?n+4:n+1}},{key:"readClobEscapes",value:function(e,t){var r;if(!(t<=e+1)){switch(r=this._in.valueAt(e+1),this._esc_len=1,r){case 48:return 0;case 97:return 7;case 98:return 8;case 116:return 9;case 110:return 10;case 102:return 12;case 114:return 13;case 118:return 11;case p:return 34;case 39:return 39;case 63:return 63;case 92:return 92;case 47:return 47;case 10:return-1;case 13:return e+3<t&&this._in.valueAt(e+3)==h&&(this._esc_len=2),u.ESCAPED_NEWLINE;case 120:if(t<=e+3)return void this._error("invalid escape sequence");r=this._get_N_hexdigits(e+2,e+4),this._esc_len=3;break;default:throw new Error("Invalid escape: /"+r)}return r}this._error("invalid escape sequence")}},{key:"_read_escape_sequence",value:function(e,t){var r;if(t<=e+1)throw new Error("Invalid escape sequence.");switch(r=this._in.valueAt(e+1),this._esc_len=1,r){case 48:return 0;case 97:return 7;case 98:return 8;case 116:return 9;case 110:return 10;case 102:return 12;case 114:return 13;case 118:return 11;case p:return 34;case 39:return 39;case 63:return 63;case 92:return 92;case 47:return 47;case 10:return-1;case 13:return e+3<t&&this._in.valueAt(e+3)==h&&(this._esc_len=2),u.ESCAPED_NEWLINE;case 120:if(t<=e+3)return void this._error("invalid escape sequence");r=this._get_N_hexdigits(e+2,e+4),this._esc_len=3;break;case 117:if(t<=e+5)return void this._error("invalid escape sequence");r=this._get_N_hexdigits(e+2,e+6),this._esc_len=5;break;case 85:if(t<=e+9)return void this._error("invalid escape sequence");r=this._get_N_hexdigits(e+2,e+10),this._esc_len=9;break;default:this._error("unexpected character after escape slash")}return r}},{key:"_get_N_hexdigits",value:function(e,t){for(var r=0;e<t;)r=16*r+v(this._in.valueAt(e)),e++;return r}},{key:"_value_push",value:function(e){-2!==this._value_type&&this._error("unexpected double push of value type!"),this._value_type=e}},{key:"_value_pop",value:function(){var e=this._value_type;return this._value_type=-2,e}},{key:"next",value:function(){var e;return this.clearFieldName(),this._ann=[],-2===this._value_type&&this._run(),this._curr=this._value_pop(),e=-2===this._curr?void this._value.push(-2):this._curr,this._curr_null=this._value_null,this._value_null=!1,e}},{key:"_run",value:function(){for(;0<this._ops.length&&-2===this._value_type;)this._ops.shift().call(this)}},{key:"_read",value:function(){return this._in.next()}},{key:"_read_skipping_comments",value:function(){var e=this._read();return e==c&&(e=(e=this._read())==c?(this._read_to_newline(),u.WHITESPACE_COMMENT1):42==e?(this._read_to_close_comment(),u.WHITESPACE_COMMENT2):(this._unread(e),c)),e}},{key:"_read_to_newline",value:function(){for(var e;-1!=(e=this._read())&&e!=h;)if(e==o){(e=this._read())!=h&&this._unread(e);break}}},{key:"_read_to_close_comment",value:function(){for(var e;-1!=(e=this._read())&&(42!=e||(e=this._read())!=c););}},{key:"_unread",value:function(e){this._in.unread(e)}},{key:"_read_after_whitespace",value:function(e){var t;if(e)for(t=this._read_skipping_comments();u.is_whitespace(t);)t=this._read_skipping_comments();else for(t=this._read();u.is_whitespace(t);)t=this._read();return t}},{key:"_peek",value:function(e){var t,r=0;if(void 0===e||e.length<1)return this._in.valueAt(this._in.position());for(;r<e.length&&(t=this._read())==e.charCodeAt(r);)r++;for(t=r===e.length?this._peek():(this._unread(t),-2);0<r;)r--,this._unread(e.charCodeAt(r));return t}},{key:"_peek_after_whitespace",value:function(e){var t=this._read_after_whitespace(e);return this._unread(t),t}},{key:"_peek_4_digits",value:function(e){var t,r,n=!0,i=[];if(!u.is_digit(e))return-2;for(t=0;t<3;t++)if(r=this._read(),i.push(r),!u.is_digit(r)){n=!1;break}for(r=n&&3==t?this._peek():-2;0<i.length;)this._unread(i.pop());return r}},{key:"_read_required_digits",value:function(e){if(!u.is_digit(e))return-2;for(;e=this._read(),u.is_digit(e););return e}},{key:"_read_optional_digits",value:function(e){for(;u.is_digit(e);)e=this._read();return e}},{key:"_readNDigits",value:function(e){var t;if(e<=0)throw new Error("Cannot read a lack of or negative number of digits.");for(;e--;)if(!u.is_digit(t=this._read()))throw new Error("Expected digit, got: "+String.fromCharCode(t));return t}},{key:"_readPastNDigits",value:function(e){return this._readNDigits(e),this._read()}},{key:"_read_required_hex_digits",value:function(e){if(!u.is_hex_digit(e))return-2;for(;e=this._read(),u.is_hex_digit(e););return e}},{key:"_read_N_hexdigits",value:function(e){for(var t,r=0;r<e;){if(t=this._read(),!u.is_hex_digit(t))return this._error(e+" digits required "+r+" found"),-2;r++}return t}},{key:"_read_hours_and_minutes",value:function(e){return u.is_digit(e)?e=58==(e=this._readPastNDigits(1))?this._readPastNDigits(2):-2:-2}},{key:"_check_for_keywords",value:function(){var e,t=this._value_pop();9==t&&3<=(e=this._end-this._start)&&e<=5&&(t=y(this.get_value_as_string(t))),this._value_push(t)}},{key:"_error",value:function(e){this._ops.unshift(this._done_with_error),this._error_msg=e}}]),r}();r.ParserTextRaw=w},{"./IonText":22,"./IonTypes":27,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],16:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits"));Object.defineProperty(r,"__esModule",{value:!0});var l=e("./IonTextWriter"),h=e("./IonText"),c=e("./IonTypes"),_=function(e){function n(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return(0,i.default)(this,n),(t=(0,a.default)(this,(0,o.default)(n).call(this,e))).indentSize=r,t.indentCount=0,t}return(0,u.default)(n,e),(0,s.default)(n,[{key:"writePrettyValue",value:function(){!this.isTopLevel&&this.currentContainer.containerType&&this.currentContainer.containerType!==c.IonTypes.STRUCT&&this.writePrettyIndent(0)}},{key:"writePrettyNewLine",value:function(e){this.indentCount=this.indentCount+e,this.indentSize&&0<this.indentSize&&this.writeable.writeByte(h.CharCodes.LINE_FEED)}},{key:"writePrettyIndent",value:function(e){if(this.indentCount=this.indentCount+e,this.indentSize&&0<this.indentSize)for(var t=0;t<this.indentCount*this.indentSize;t++)this.writeable.writeByte(h.CharCodes.SPACE)}},{key:"writeFieldName",value:function(e){if(this.currentContainer.containerType!==c.IonTypes.STRUCT)throw new Error("Cannot write field name outside of a struct");if(this.currentContainer.state!==l.State.STRUCT_FIELD)throw new Error("Expecting a struct value");this.currentContainer.clean||(this.writeable.writeByte(h.CharCodes.COMMA),this.writePrettyNewLine(0)),this.writePrettyIndent(0),this.writeSymbolToken(e),this.writeable.writeByte(h.CharCodes.COLON),this.currentContainer.state=l.State.VALUE}},{key:"writeNull",value:function(e){if(null==e||e.binaryTypeId<0||13<e.binaryTypeId)throw new Error("Cannot write null for type ".concat(e));this.handleSeparator(),this.writePrettyValue(),this.writeAnnotations(),this.writeUtf8("null."+e.name),this.currentContainer.containerType===c.IonTypes.STRUCT&&(this.currentContainer.state=l.State.STRUCT_FIELD)}},{key:"stepOut",value:function(){var e=this.containerContext.pop();if(!e||!e.containerType)throw new Error("Can't step out when not in a container");if(e.containerType===c.IonTypes.STRUCT&&e.state===l.State.VALUE)throw new Error("Expecting a struct value");switch(e.clean||this.writePrettyNewLine(0),this.writePrettyIndent(-1),e.containerType){case c.IonTypes.LIST:this.writeable.writeByte(h.CharCodes.RIGHT_BRACKET);break;case c.IonTypes.SEXP:this.writeable.writeByte(h.CharCodes.RIGHT_PARENTHESIS);break;case c.IonTypes.STRUCT:this.writeable.writeByte(h.CharCodes.RIGHT_BRACE);break;default:throw new Error("Unexpected container type")}}},{key:"_serializeValue",value:function(e,t,r){if(this.currentContainer.state===l.State.STRUCT_FIELD)throw new Error("Expecting a struct field");null!=t?(this.handleSeparator(),this.writePrettyValue(),this.writeAnnotations(),r(t),this.currentContainer.containerType===c.IonTypes.STRUCT&&(this.currentContainer.state=l.State.STRUCT_FIELD)):this.writeNull(e)}},{key:"writeContainer",value:function(e,t){this.currentContainer.containerType===c.IonTypes.STRUCT&&this.currentContainer.state===l.State.VALUE&&(this.currentContainer.state=l.State.STRUCT_FIELD),this.handleSeparator(),this.writePrettyValue(),this.writeAnnotations(),this.writeable.writeByte(t),this.writePrettyNewLine(1),this._stepIn(e)}},{key:"handleSeparator",value:function(){if(this.isTopLevel)this.currentContainer.clean?this.currentContainer.clean=!1:this.writeable.writeByte(h.CharCodes.LINE_FEED);else if(this.currentContainer.clean)this.currentContainer.clean=!1;else switch(this.currentContainer.containerType){case c.IonTypes.LIST:this.writeable.writeByte(h.CharCodes.COMMA),this.writePrettyNewLine(0);break;case c.IonTypes.SEXP:this.writeable.writeByte(h.CharCodes.SPACE),this.writePrettyNewLine(0)}}}]),n}(l.TextWriter);r.PrettyTextWriter=_},{"./IonText":22,"./IonTextWriter":24,"./IonTypes":27,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/getPrototypeOf":38,"@babel/runtime/helpers/inherits":39,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/possibleConstructorReturn":43}],17:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function n(e,t,r){(0,i.default)(this,n),this._name=e,this._version=t,this._symbols=r}return(0,s.default)(n,[{key:"name",get:function(){return this._name}},{key:"version",get:function(){return this._version}},{key:"symbols",get:function(){return this._symbols}}]),n}();r.SharedSymbolTable=a},{"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],18:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),a=n(e("@babel/runtime/helpers/inherits")),o=n(e("@babel/runtime/helpers/classCallCheck")),u=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var l=e("./IonConstants"),h=function(){function t(e){(0,o.default)(this,t),this._type=e}return(0,u.default)(t,[{key:"write",value:function(e){throw new Error("not implemented")}}],[{key:"error",value:function(){throw new Error("span error")}}]),t}(),c=function(e){function r(e){var t;return(0,o.default)(this,r),(t=(0,i.default)(this,(0,s.default)(r).call(this,0)))._line=1,t._src=e,t._limit=e.length,t._start=0,t._pos=0,t._line_start=0,t._old_line_start=0,t}return(0,a.default)(r,e),(0,u.default)(r,[{key:"viewSource",value:function(){return this._src}},{key:"position",value:function(){return this._pos-this._start}},{key:"getRemaining",value:function(){return this._limit-this._pos}},{key:"setRemaining",value:function(e){this._limit=e+this._pos}},{key:"is_empty",value:function(){return this._pos>=this._limit}},{key:"next",value:function(){var e;if(this.is_empty()){if(1073741824<this._pos)throw new Error("span position is out of bounds");return this._pos++,l.EOF}return 13===(e=this._src.charCodeAt(this._pos))?10!=this.peek()&&this._inc_line():10==e&&this._inc_line(),this._pos++,e}},{key:"_inc_line",value:function(){this._old_line_start=this._line_start,this._line++,this._line_start=this._pos}},{key:"unread",value:function(e){this._pos<=this._start&&h.error(),this._pos--,e<0?1!=this.is_empty()&&h.error():(this._pos==this._line_start&&(this._line_start=this._old_line_start,this._line--),e!=this.peek()&&h.error())}},{key:"peek",value:function(){return this.valueAt(this._pos)}},{key:"skip",value:function(e){this._pos+=e,this._pos>this._limit&&(this._pos=this._limit)}},{key:"valueAt",value:function(e){return e<this._start||e>=this._limit?l.EOF:this._src.charCodeAt(e)}},{key:"chunk",value:function(e){var t=this._src.substr(this._pos,e);return this._pos+=e,t}},{key:"getCodePoint",value:function(e){return this._src.codePointAt(e)}},{key:"line_number",value:function(){return this._line}},{key:"offset",value:function(){return this._pos-this._line_start}},{key:"clone",value:function(e){return new r(this._src.substr(this._pos))}}]),r}(r.Span=h);r.StringSpan=c;var _=function(e){function r(e){var t;return(0,o.default)(this,r),(t=(0,i.default)(this,(0,s.default)(r).call(this,1)))._src=e,t._limit=e.length,t._start=0,t._pos=0,t}return(0,a.default)(r,e),(0,u.default)(r,[{key:"position",value:function(){return this._pos-this._start}},{key:"getRemaining",value:function(){return this._limit-this._pos}},{key:"setRemaining",value:function(e){this._limit=e+this._pos}},{key:"is_empty",value:function(){return this._pos>=this._limit}},{key:"next",value:function(){return this.is_empty()?l.EOF:this._src[this._pos++]}},{key:"view",value:function(e){if(this._pos+e>this._limit)throw new Error("Unable to read "+e+" bytes (position: "+this.position()+", limit: "+this._limit+")");return this._src.subarray(this._pos,this._pos+=e)}},{key:"chunk",value:function(e){return new Uint8Array(this.view(e))}},{key:"unread",value:function(e){this._pos<=this._start&&h.error(),this._pos--,e==l.EOF&&0==this.is_empty()&&h.error(),e!=this.peek()&&h.error()}},{key:"peek",value:function(){return this.is_empty()?l.EOF:this._src[this._pos]}},{key:"skip",value:function(e){if(this._pos+=e,this._pos>this._limit)throw new Error("Skipped over end of source.")}},{key:"valueAt",value:function(e){if(!(e<this._start||e>=this._limit))return this._src[e]}},{key:"clone",value:function(e,t){return new r(this._src.subarray(this._pos))}}]),r}(h);r.BinarySpan=_},{"./IonConstants":8,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/getPrototypeOf":38,"@babel/runtime/helpers/inherits":39,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/possibleConstructorReturn":43}],19:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),a=n(e("@babel/runtime/helpers/getPrototypeOf")),o=n(e("@babel/runtime/helpers/inherits"));Object.defineProperty(r,"__esModule",{value:!0});var u=function(e){function t(e){return(0,i.default)(this,t),(0,s.default)(this,(0,a.default)(t).call(this,null,void 0,new Array(e)))}return(0,o.default)(t,e),t}(e("./IonSharedSymbolTable").SharedSymbolTable);r.SubstituteSymbolTable=u},{"./IonSharedSymbolTable":17,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/getPrototypeOf":38,"@babel/runtime/helpers/inherits":39,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/possibleConstructorReturn":43}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("./IonSystemSymbolTable"),u=e("./IonImport"),a=e("./IonLocalSymbolTable"),l=e("./IonSubstituteSymbolTable");r.ion_symbol_table="$ion_symbol_table",r.ion_symbol_table_sid=3;function h(e,t){var r=o.getSystemSymbolTableImport();for(e.stepIn();e.next();){e.stepIn();for(var n=void 0,i=1,s=void 0;e.next();)switch(e.fieldName()){case"name":n=e.stringValue();break;case"version":i=e.numberValue();break;case"max_id":s=e.numberValue()}if(i<1&&(i=1),n&&"$ion"!==n){var a=t.getVersion(n,i);if(!a){if(void 0===s)throw new Error("No exact match found when trying to import symbol table ".concat(n," version ").concat(i));a=t.getTable(n)}a=a||new l.SubstituteSymbolTable(s),r=new u.Import(r,a,s)}e.stepOut()}return e.stepOut(),r}function c(e){var t=[];for(e.stepIn();e.next();)t.push(e.stringValue());return e.stepOut(),t}r.makeSymbolTable=function(e,t){var r,n,i=!1,s=!1;for(t.stepIn();t.next();)switch(t.fieldName()){case"imports":if(s)throw new Error("Multiple import fields found.");r=h(t,e),s=!0;break;case"symbols":if(i)throw new Error("Multiple symbol fields found.");n=c(t),i=!0}return t.stepOut(),new a.LocalSymbolTable(r,n)}},{"./IonImport":10,"./IonLocalSymbolTable":11,"./IonSubstituteSymbolTable":19,"./IonSystemSymbolTable":21}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./IonImport"),i=new(e("./IonSharedSymbolTable").SharedSymbolTable)("$ion",1,["$ion","$ion_1_0","$ion_symbol_table","name","version","imports","symbols","max_id","$ion_shared_symbol_table"]);function s(){return i}r.getSystemSymbolTable=s,r.getSystemSymbolTableImport=function(){return new n.Import(null,s())}},{"./IonImport":10,"./IonSharedSymbolTable":17}],22:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/extends"));Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_COMMENT1=-2,r.WHITESPACE_COMMENT2=-3,r.ESCAPED_NEWLINE=-4;var i=34,s=39,a=92,o={0:"\\0",8:"\\b",9:"\\t",10:"\\n",13:"\\r",DOUBLE_QUOTE:'\\"',SINGLE_QUOTE:"\\'",SLASH:"\\\\"};function u(e){var t=e.length,r=[];for(r[128]=!1;0<t;)--t,r[e.charCodeAt(t)]=!0;return r}var l=u("+/0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),h=u("0123456789abcdefABCDEF"),c=u("_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),_=u("_$0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),f=u("{}[](),\"' \t\n\r\v\f"),p=u("!#%&*+-./;<=>?@^`|~"),d=u(" \t\r\n\v\f"),y=u("_$0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function v(e){return!(e<48||57<e)}function b(e,t){for(;0<t--&&!w(e.charCodeAt(t)););return t}function w(e){return e<32||(126<e||(e===i||e===s||e===a))}function m(e,t){for(var r,n,i,s=[];0<=t&&w(r=e.charCodeAt(t));)s.push([t,r]),t=b(e,t);if(0<s.length){for(i="",n=s.length,t=e.length;n--;){var a=s[n];i=0<t-a[0]-1?T(a[1])+e.substring(a[0]+1,t)+i:e.substring(a[0]+1,t)+i,t=a[0]-1}0<=t&&(i=e.substring(0,t)+i),e=i}return e}function T(e){var t=o[e];return void 0===t&&(t=e<256?"\\x"+g(e,2):e<=65535?"\\u"+g(e,4):"\\U"+g(e,8)),t}function g(e,t){for(var r="";0<e;)r+="0123456789ABCDEF".charAt(e&&15),e/=16;return r.length<t&&(r=(r="000000000"+r).substring(r.length-t,r.length)),r}r.is_digit=v,r.is_keyword=function(e){return"null"===e||"true"===e||"false"===e||"nan"===e||"+inf"===e||"-inf"===e},r.asAscii=function(e){if(void 0===e)e="undefined::null";else if("number"==typeof e)e=""+e;else if("string"!=typeof e){var t=b(e,e.length);0<=t&&(e=m(e,t))}return e},r.nextEscape=b,r.needsEscape=w,r.escapeString=m,r.escapeSequence=T,r.toHex=g,r.is_letter=function(e){return c[e]},r.isNumericTerminator=function(e){return-1==e||f[e]},r.is_letter_or_digit=function(e){return _[e]},r.is_operator_char=function(e){return p[e]},r.is_whitespace=function(e){return!(32<e)&&(e==this.WHITESPACE_COMMENT1||(e==this.WHITESPACE_COMMENT2||(e==this.ESCAPED_NEWLINE||d[e])))},r.is_base64_char=function(e){return l[e]},r.is_hex_digit=function(e){return h[e]};var I,S,C=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],E={0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,"+":62,"/":63};function k(e){return[I.BACKSLASH,e.charCodeAt(0)]}function L(e){for(var t=[I.BACKSLASH,I.LOWERCASE_U],r=e.toString(16);r.length<4;)r="0"+r;return t.concat(function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(r))}r.fromBase64=function(e){for(var t=0,r=e.length-1;"="==e.charAt(r);r--)t++;for(var n=new Uint8Array(3*e.length/4-t),i=0;i<e.length-t;i+=4){var s=E[e.charAt(i)],a=E[e.charAt(i+1)],o=E[e.charAt(i+2)],u=E[e.charAt(i+3)];n[3*i/4]=s<<2&255|a>>>4,i+2<e.length-t&&(n[3*i/4+1]=a<<4&255|o>>>2,i+3<e.length-t&&(n[3*i/4+2]=o<<6&255|u))}return n},r.toBase64=function(e){for(var t=new Array(Math.ceil(4*e.length/3)),r=0;r<e.length;r+=3){var n=e[r],i=e[r+1],s=e[r+2];e[r+3];if(t[4*r/3]=C[n>>>2],t[4*r/3+1]=C[n<<4&63|(i||0)>>>4],!(r+1<e.length))return t.join("")+"==";if(t[4*r/3+2]=C[i<<2&63|(s||0)>>>6],!(r+2<e.length))return t.join("")+"=";t[4*r/3+3]=C[63&s]}return t.join("")},(S=I=r.CharCodes||(r.CharCodes={}))[S.NULL=0]="NULL",S[S.BELL=7]="BELL",S[S.BACKSPACE=8]="BACKSPACE",S[S.HORIZONTAL_TAB=9]="HORIZONTAL_TAB",S[S.LINE_FEED=10]="LINE_FEED",S[S.VERTICAL_TAB=11]="VERTICAL_TAB",S[S.FORM_FEED=12]="FORM_FEED",S[S.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",S[S.DOUBLE_QUOTE=34]="DOUBLE_QUOTE",S[S.SINGLE_QUOTE=39]="SINGLE_QUOTE",S[S.FORWARD_SLASH=47]="FORWARD_SLASH",S[S.QUESTION_MARK=63]="QUESTION_MARK",S[S.BACKSLASH=92]="BACKSLASH",S[S.LEFT_PARENTHESIS=40]="LEFT_PARENTHESIS",S[S.RIGHT_PARENTHESIS=41]="RIGHT_PARENTHESIS",S[S.LEFT_BRACE=123]="LEFT_BRACE",S[S.RIGHT_BRACE=125]="RIGHT_BRACE",S[S.LEFT_BRACKET=91]="LEFT_BRACKET",S[S.RIGHT_BRACKET=93]="RIGHT_BRACKET",S[S.COMMA=44]="COMMA",S[S.SPACE=32]="SPACE",S[S.LOWERCASE_U=117]="LOWERCASE_U",S[S.COLON=58]="COLON",r.ClobEscapes={},r.ClobEscapes[I.NULL]=k("0"),r.ClobEscapes[I.BELL]=k("a"),r.ClobEscapes[I.BACKSPACE]=k("b"),r.ClobEscapes[I.HORIZONTAL_TAB]=k("t"),r.ClobEscapes[I.LINE_FEED]=k("n"),r.ClobEscapes[I.VERTICAL_TAB]=k("v"),r.ClobEscapes[I.FORM_FEED]=k("f"),r.ClobEscapes[I.CARRIAGE_RETURN]=k("r"),r.ClobEscapes[I.DOUBLE_QUOTE]=k('"'),r.ClobEscapes[I.SINGLE_QUOTE]=k("'"),r.ClobEscapes[I.FORWARD_SLASH]=k("/"),r.ClobEscapes[I.QUESTION_MARK]=k("?"),r.ClobEscapes[I.BACKSLASH]=k("\\");var A={};A[I.NULL]=k("0"),function(e,t,r){if(void 0===r)e[t]=L(t);else for(var n=t;n<r;n++)e[n]=L(n)}(A,1,6),A[I.BELL]=k("a"),A[I.BACKSPACE]=k("b"),A[I.HORIZONTAL_TAB]=k("t"),A[I.LINE_FEED]=k("n"),A[I.VERTICAL_TAB]=k("v"),A[I.FORM_FEED]=k("f"),A[I.CARRIAGE_RETURN]=k("r"),A[I.BACKSLASH]=k("\\"),r.StringEscapes=(0,n.default)({},A),r.StringEscapes[I.DOUBLE_QUOTE]=k('"'),r.SymbolEscapes=(0,n.default)({},A),r.SymbolEscapes[I.SINGLE_QUOTE]=k("'"),r.isIdentifier=function(e){if(v(e.charCodeAt(0)))return!1;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(!y[r])return!1}return!0},r.isOperator=function(e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(!p[r])return!1}return!0},r.isDigit=function(e){return e<58&&47<e},r.escape=function(e,t){for(var r,n="",i="",s=0,a=0;a<e.length;a++)if(void 0!==(r=t[e.charCodeAt(a)])){for(var o=0;o<r.length;o++)i+=String.fromCharCode(r[o]);n+=e.slice(s,a)+i,s=a+1,i=""}return n+e.slice(s,e.length)}},{"@babel/runtime/helpers/extends":36,"@babel/runtime/helpers/interopRequireDefault":40}],23:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var a=e("./IonCatalog"),o=e("./IonDecimal"),u=e("./IonLocalSymbolTable"),l=e("./IonParserTextRaw"),h=e("./IonSymbols"),c=e("./IonType"),_=e("./IonTypes"),f=e("./IonSymbols"),p=e("./IonParserTextRaw"),d=e("./IonTimestamp"),y=e("./IonText"),v=e("./IonUnicode"),b=(new c.IonType(-1,"raw_input",!0,!1,!1,!1),function(){function r(e,t){if((0,i.default)(this,r),!e)throw new Error("a source Span is required to make a reader");this._parser=new p.ParserTextRaw(e),this._depth=0,this._cat=t||new a.Catalog,this._symtab=u.defaultLocalSymbolTable(),this._type=null,this._raw_type=void 0,this._raw=void 0}return(0,s.default)(r,[{key:"load_raw",value:function(){void 0===this._raw&&(this._raw=this._parser.get_value_as_string(this._raw_type))}},{key:"skip_past_container",value:function(){var e,t=this.depth();for(this.stepIn();this.depth()>t;)null===(e=this.next())?this.stepOut():e.isContainer&&!this.isNull()&&this.stepIn()}},{key:"isIVM",value:function(e,t,r){if(0<t)return!1;var n="$ion_1_0";if(e.length<n.length||0<r.length)return!1;for(var i=0;i<"$ion_".length;){if("$ion_".charAt(i)!==e.charAt(i))return!1;i++}for(;i<e.length&&"_"!=e.charAt(i);){var s=e.charAt(i);if(s<"0"||"9"<s)return!1;i++}for(i++;i<e.length;){var a=e.charAt(i);if(a<"0"||"9"<a)return!1;i++}if(e!==n)throw new Error("Only Ion version 1.0 is supported.");return!0}},{key:"isLikeIVM",value:function(){return!1}},{key:"next",value:function(){if(this._raw=void 0,-1===this._raw_type)return null;-2!==this._raw_type&&!this.isNull()&&this._type&&this._type.isContainer&&this.skip_past_container();for(var e=this._parser;;)if(this._raw_type=e.next(),9===this._raw_type){if(0<this._depth)break;if(this.load_raw(),!this.isIVM(this._raw,this.depth(),this.annotations()))break;this._symtab=u.defaultLocalSymbolTable(),this._raw=void 0,this._raw_type=void 0}else if(11===this._raw_type){if(0<this._depth)break;if(this.load_raw(),"$ion_1_0"!==this._raw)break;this._raw=void 0,this._raw_type=void 0}else{if(19!==this._raw_type)break;if(1!==e.annotations().length)break;if(e.annotations()[0]!=h.ion_symbol_table)break;this._type=l.get_ion_type(this._raw_type),this._symtab=f.makeSymbolTable(this._cat,this),this._raw=void 0,this._raw_type=void 0}return this._type=l.get_ion_type(this._raw_type),this._type}},{key:"stepIn",value:function(){if(!this._type.isContainer)throw new Error("can't step in to a scalar value");if(this.isNull())throw new Error("Can't step into a null container");this._parser.clearFieldName(),this._type=null,this._raw_type=-2,this._depth++}},{key:"stepOut",value:function(){for(this._parser.clearFieldName();-1!=this._raw_type;)this.next();this._raw_type=void 0,this._depth--}},{key:"type",value:function(){return this._type}},{key:"depth",value:function(){return this._depth}},{key:"fieldName",value:function(){var e=this._parser.fieldName();if(9===this._parser.fieldNameType()&&1<e.length&&e.charAt(0)==="$".charAt(0)){var t=e.substr(1,e.length);if(+t==+t){var r=this._symtab.getSymbol(Number(t));if(void 0===r)throw new Error("Unresolveable symbol ID, symboltokens unsupported.");return r}}return e}},{key:"annotations",value:function(){return this._parser.annotations()}},{key:"isNull",value:function(){return this._type===_.IonTypes.NULL||this._parser.isNull()}},{key:"_stringRepresentation",value:function(){if(this.load_raw(),this.isNull())return this._type===_.IonTypes.NULL?"null":"null."+this._type.name;if(!this._type.isScalar)throw new Error("Cannot create string representation of non-scalar values.");switch(this._type){case _.IonTypes.BLOB:return this._raw;case _.IonTypes.SYMBOL:if(9===this._raw_type&&1<this._raw.length&&this._raw.charAt(0)==="$".charAt(0)){var e=this._raw.substr(1,this._raw.length);if(+e==+e){var t=this._symtab.getSymbol(Number(e));if(void 0===t)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return t}}return this._raw;default:return this._raw}}},{key:"booleanValue",value:function(){switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.BOOL:return this._parser.booleanValue()}throw new Error("Current value is not a Boolean.")}},{key:"byteValue",value:function(){switch(this.load_raw(),this._type){case _.IonTypes.NULL:return null;case _.IonTypes.BLOB:return this.isNull()?null:y.fromBase64(this._raw);case _.IonTypes.CLOB:return this.isNull()?null:v.encodeUtf8(this._raw)}throw new Error("Current value is not a blob or clob.")}},{key:"decimalValue",value:function(){switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.DECIMAL:return o.Decimal.parse(this._stringRepresentation())}throw new Error("Current value is not a decimal.")}},{key:"numberValue",value:function(){switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.FLOAT:case _.IonTypes.INT:return this._parser.numberValue()}throw new Error("Current value is not a float or int.")}},{key:"stringValue",value:function(){switch(this.load_raw(),this._type){case _.IonTypes.NULL:return null;case _.IonTypes.STRING:return this._parser.isNull()?null:this._raw;case _.IonTypes.SYMBOL:if(this._parser.isNull())return null;if(9===this._raw_type&&1<this._raw.length&&this._raw.charAt(0)==="$".charAt(0)){var e=this._raw.substr(1,this._raw.length);if(+e==+e){var t=this._symtab.getSymbol(Number(e));if(void 0===t)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return t}}return this._raw}throw new Error("Current value is not a string or symbol.")}},{key:"timestampValue",value:function(){switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.TIMESTAMP:return d.Timestamp.parse(this._stringRepresentation())}throw new Error("Current value is not a timestamp.")}},{key:"value",value:function(){if(this._type&&this._type.isContainer){if(this.isNull())return null;throw new Error("Unable to provide a value for "+this._type.name+" containers.")}switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.BLOB:case _.IonTypes.CLOB:return this.byteValue();case _.IonTypes.BOOL:return this.booleanValue();case _.IonTypes.DECIMAL:return this.decimalValue();case _.IonTypes.FLOAT:case _.IonTypes.INT:return this.numberValue();case _.IonTypes.STRING:case _.IonTypes.SYMBOL:return this.stringValue();case _.IonTypes.TIMESTAMP:return this.timestampValue();default:throw new Error("There is no current value.")}}}]),r}());r.TextReader=b},{"./IonCatalog":7,"./IonDecimal":9,"./IonLocalSymbolTable":11,"./IonParserTextRaw":15,"./IonSymbols":20,"./IonText":22,"./IonTimestamp":25,"./IonType":26,"./IonTypes":27,"./IonUnicode":28,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],24:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),a=n(e("@babel/runtime/helpers/getPrototypeOf")),o=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/classCallCheck"));Object.defineProperty(r,"__esModule",{value:!0});var h,c,_=e("./AbstractWriter"),f=e("./IonUnicode"),p=e("./IonText"),d=e("./IonTypes"),y=e("./util");(c=h=r.State||(r.State={}))[c.VALUE=0]="VALUE",c[c.STRUCT_FIELD=1]="STRUCT_FIELD";function v(e){(0,l.default)(this,v),this.state=e===d.IonTypes.STRUCT?h.STRUCT_FIELD:h.VALUE,this.clean=!0,this.containerType=e}r.Context=v;var b=function(e){function r(e){var t;return(0,l.default)(this,r),(t=(0,s.default)(this,(0,a.default)(r).call(this))).writeable=e,t._floatSerializer=function(e){r._serializeFloat((0,o.default)(t),e)},t.containerContext=[new v(void 0)],t}return(0,u.default)(r,e),(0,i.default)(r,[{key:"getBytes",value:function(){return this.writeable.getBytes()}},{key:"writeBlob",value:function(e){var t=this;this._serializeValue(d.IonTypes.BLOB,e,function(e){t.writeable.writeBytes(f.encodeUtf8("{{"+p.toBase64(e)+"}}"))})}},{key:"writeBoolean",value:function(e){var t=this;this._serializeValue(d.IonTypes.BOOL,e,function(e){t.writeUtf8(e?"true":"false")})}},{key:"writeClob",value:function(e){var o=this;this._serializeValue(d.IonTypes.CLOB,e,function(e){var t;o.writeUtf8('{{"');for(var r=0;r<e.length;r++){var n=e[r];if(127<n&&n<256){t="\\x"+n.toString(16);for(var i=0;i<t.length;i++)o.writeable.writeByte(t.charCodeAt(i))}else{var s=p.ClobEscapes[n];if(void 0===s)if(n<32){t="\\x"+n.toString(16);for(var a=0;a<t.length;a++)o.writeable.writeByte(t.charCodeAt(a))}else o.writeable.writeByte(n);else o.writeable.writeBytes(new Uint8Array(s))}}o.writeUtf8('"}}')})}},{key:"writeDecimal",value:function(e){var i=this;this._serializeValue(d.IonTypes.DECIMAL,e,function(e){if(null===e)i.writeUtf8("null.decimal");else{var t="",r=e._getCoefficient();r.isZero()&&-1===r.signum()&&(t+="-"),t+=r.toString()+"d";var n=e._getExponent();0===n&&-1===y._sign(n)&&(t+="-"),t+=n,i.writeUtf8(t)}})}},{key:"writeFieldName",value:function(e){if(this.currentContainer.containerType!==d.IonTypes.STRUCT)throw new Error("Cannot write field name outside of a struct");if(this.currentContainer.state!==h.STRUCT_FIELD)throw new Error("Expecting a struct value");this.currentContainer.clean||this.writeable.writeByte(p.CharCodes.COMMA),this.writeSymbolToken(e),this.writeable.writeByte(p.CharCodes.COLON),this.currentContainer.state=h.VALUE}},{key:"writeFloat32",value:function(e){this._writeFloat(e)}},{key:"writeFloat64",value:function(e){this._writeFloat(e)}},{key:"_writeFloat",value:function(e){this._serializeValue(d.IonTypes.FLOAT,e,this._floatSerializer)}},{key:"writeInt",value:function(e){var t=this;this._serializeValue(d.IonTypes.INT,e,function(e){t.writeUtf8(e.toString(10))})}},{key:"writeNull",value:function(e){if(null==e||e.binaryTypeId<0||13<e.binaryTypeId)throw new Error("Cannot write null for type ".concat(e));this.handleSeparator(),this.writeAnnotations(),this.writeUtf8("null."+e.name),this.currentContainer.containerType===d.IonTypes.STRUCT&&(this.currentContainer.state=h.STRUCT_FIELD)}},{key:"writeString",value:function(e){var t=this;this._serializeValue(d.IonTypes.STRING,e,function(e){t.writeable.writeBytes(f.encodeUtf8('"'+p.escape(e,p.StringEscapes)+'"'))})}},{key:"writeSymbol",value:function(e){var t=this;this._serializeValue(d.IonTypes.SYMBOL,e,function(e){t.writeSymbolToken(e)})}},{key:"writeTimestamp",value:function(e){var t=this;this._serializeValue(d.IonTypes.TIMESTAMP,e,function(e){t.writeUtf8(e.toString())})}},{key:"stepIn",value:function(e){switch(e){case d.IonTypes.LIST:this.writeContainer(e,p.CharCodes.LEFT_BRACKET);break;case d.IonTypes.SEXP:this.writeContainer(e,p.CharCodes.LEFT_PARENTHESIS);break;case d.IonTypes.STRUCT:if(void 0!==this._annotations&&"$ion_symbol_table"===this._annotations[0]&&0===this.depth())throw new Error("Unable to alter symbol table context, it allows invalid ion to be written.");this.writeContainer(e,p.CharCodes.LEFT_BRACE);break;default:throw new Error("Unrecognized container type")}}},{key:"stepOut",value:function(){var e=this.containerContext.pop();if(!e||!e.containerType)throw new Error("Can't step out when not in a container");if(e.containerType===d.IonTypes.STRUCT&&e.state===h.VALUE)throw new Error("Expecting a struct value");switch(e.containerType){case d.IonTypes.LIST:this.writeable.writeByte(p.CharCodes.RIGHT_BRACKET);break;case d.IonTypes.SEXP:this.writeable.writeByte(p.CharCodes.RIGHT_PARENTHESIS);break;case d.IonTypes.STRUCT:this.writeable.writeByte(p.CharCodes.RIGHT_BRACE);break;default:throw new Error("Unexpected container TypeCode")}}},{key:"close",value:function(){if(!this.isTopLevel)throw new Error("Writer has one or more open containers; call stepOut() for each container prior to close()")}},{key:"_serializeValue",value:function(e,t,r){if(this.currentContainer.state===h.STRUCT_FIELD)throw new Error("Expecting a struct field");null!=t?(this.handleSeparator(),this.writeAnnotations(),r(t),this.currentContainer.containerType===d.IonTypes.STRUCT&&(this.currentContainer.state=h.STRUCT_FIELD)):this.writeNull(e)}},{key:"writeContainer",value:function(e,t){this.currentContainer.containerType===d.IonTypes.STRUCT&&this.currentContainer.state===h.VALUE&&(this.currentContainer.state=h.STRUCT_FIELD),this.handleSeparator(),this.writeAnnotations(),this.writeable.writeByte(t),this._stepIn(e)}},{key:"handleSeparator",value:function(){if(this.isTopLevel)this.currentContainer.clean?this.currentContainer.clean=!1:this.writeable.writeByte(p.CharCodes.LINE_FEED);else if(this.currentContainer.clean)this.currentContainer.clean=!1;else switch(this.currentContainer.containerType){case d.IonTypes.LIST:this.writeable.writeByte(p.CharCodes.COMMA);break;case d.IonTypes.SEXP:this.writeable.writeByte(p.CharCodes.SPACE)}}},{key:"writeUtf8",value:function(e){this.writeable.writeBytes(f.encodeUtf8(e))}},{key:"writeAnnotations",value:function(){if(null!==this._annotations&&void 0!==this._annotations){var e=!0,t=!1,r=void 0;try{for(var n,i=this._annotations[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var s=n.value;this.writeSymbolToken(s),this.writeUtf8("::")}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this._clearAnnotations()}}},{key:"depth",value:function(){return this.containerContext.length-1}},{key:"_stepIn",value:function(e){this.containerContext.push(new v(e))}},{key:"isSid",value:function(e){if(1<e.length&&e.charAt(0)==="$".charAt(0)){var t=e.substr(1,e.length);return+t==+t}return!1}},{key:"writeSymbolToken",value:function(e){0===e.length||p.is_keyword(e)||this.isSid(e)||!p.isIdentifier(e)&&!p.isOperator(e)||p.isOperator(e)&&this.currentContainer.containerType!=d.IonTypes.SEXP?this.writeable.writeBytes(f.encodeUtf8("'"+p.escape(e,p.SymbolEscapes)+"'")):this.writeUtf8(e)}},{key:"isTopLevel",get:function(){return 0===this.depth()}},{key:"currentContainer",get:function(){return this.containerContext[this.depth()]}}],[{key:"_serializeFloat",value:function(e,t){var r;if(t===Number.POSITIVE_INFINITY)r="+inf";else if(t===Number.NEGATIVE_INFINITY)r="-inf";else if(t===Number.NaN)r="nan";else if(Object.is(t,-0))r="-0e0";else{var n=(r=t.toExponential()).lastIndexOf("+");-1<n&&(r=r.slice(0,n)+r.slice(n+1))}e.writeUtf8(r)}}]),r}(_.AbstractWriter);r.TextWriter=b},{"./AbstractWriter":1,"./IonText":22,"./IonTypes":27,"./IonUnicode":28,"./util":30,"@babel/runtime/helpers/assertThisInitialized":32,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/getPrototypeOf":38,"@babel/runtime/helpers/inherits":39,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/possibleConstructorReturn":43}],25:[function(e,t,r){"use strict";var n,i=e("@babel/runtime/helpers/interopRequireDefault"),s=i(e("@babel/runtime/helpers/defineProperty")),h=i(e("@babel/runtime/helpers/slicedToArray")),c=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var _,o,b=e("./IonDecimal"),u=e("./IonText"),f=e("./util");(o=_=r.TimestampPrecision||(r.TimestampPrecision={}))[o.YEAR=1]="YEAR",o[o.MONTH=2]="MONTH",o[o.DAY=3]="DAY",o[o.HOUR_AND_MINUTE=4]="HOUR_AND_MINUTE",o[o.SECONDS=5]="SECONDS";var w,l,m=function(){function l(e,t,r,n,i,s,a){if((0,c.default)(this,l),this._localOffset=e,this._year=t,this._precision=_.YEAR,this._checkRequiredField("Offset",this._localOffset,l._MIN_OFFSET,l._MAX_OFFSET),this._checkRequiredField("Year",this._year,l._MIN_YEAR,l._MAX_YEAR),this._month=this._checkOptionalField("Month",r,l._MIN_MONTH,l._MAX_MONTH,1,_.MONTH),this._day=this._checkOptionalField("Day",n,l._MIN_DAY,l._MAX_DAY,1,_.DAY),this._hour=this._checkOptionalField("Hour",i,l._MIN_HOUR,l._MAX_HOUR,0,_.HOUR_AND_MINUTE),this._minutes=this._checkOptionalField("Minutes",s,l._MIN_MINUTE,l._MAX_MINUTE,0,_.HOUR_AND_MINUTE),"number"==typeof a){if(!Number.isInteger(a))throw new Error("The provided seconds number was not an integer ("+a+")");this._secondsDecimal=new b.Decimal(a,0)}else this._secondsDecimal=a;if(null===this._secondsDecimal||void 0===this._secondsDecimal?this._secondsDecimal=b.Decimal.ZERO:(this._checkFieldRange("Seconds",this._secondsDecimal,l._MIN_SECONDS,l._MAX_SECONDS),this._precision=_.SECONDS),this._precision<=_.DAY&&(this._localOffset=-0),this._precision>_.MONTH){var o=new Date(this._year,this._month,0);if(o.setUTCFullYear(this._year),this._day>o.getDate())throw new Error("Month ".concat(this._month," has less than ").concat(this._day," days"));if(2===this._month&&29===this._day&&!this._isLeapYear(this._year))throw new Error("Given February 29th but year ".concat(this._year," is not a leap year"))}var u=this.getDate().getUTCFullYear();this._checkFieldRange("Year",u,l._MIN_YEAR,l._MAX_YEAR)}return(0,a.default)(l,[{key:"_checkRequiredField",value:function(e,t,r,n){if(!f._hasValue(t))throw new Error("".concat(e," cannot be ").concat(t));this._checkFieldRange(e,t,r,n)}},{key:"_checkOptionalField",value:function(e,t,r,n,i,s){return f._hasValue(t)?(this._checkFieldRange(e,t,r,n),this._precision=s,t):i}},{key:"_checkFieldRange",value:function(e,t,r,n){if(t instanceof b.Decimal){if(f._hasValue(t)&&(t.compareTo(r)<0||0<=t.compareTo(n)))throw new Error("".concat(e," ").concat(t," must be between ").concat(r," inclusive, and ").concat(n," exclusive"))}else{if(!Number.isInteger(t))throw new Error("".concat(e," ").concat(t," must be an integer"));if(t<r||n<t)throw new Error("".concat(e," ").concat(t," must be between ").concat(r," and ").concat(n," inclusive"))}}},{key:"_isLeapYear",value:function(e){return e%4==0&&(e%400==0||(e%100!=0||e<1600))}},{key:"getLocalOffset",value:function(){return this._localOffset}},{key:"getPrecision",value:function(){return this._precision}},{key:"getDate",value:function(){var e=null;this._precision===_.SECONDS&&(e=Math.round(1e3*(this._secondsDecimal.numberValue()-this.getSecondsInt())));var t=Date.UTC(this._year,this._precision===_.YEAR?0:this._month-1,this._day,this._hour,this._minutes,this.getSecondsInt(),e);t=l._adjustMsSinceEpochIfNeeded(this._year,t);var r=60*this._localOffset*1e3;return new Date(t-r)}},{key:"getSecondsInt",value:function(){return this._secondsDecimal.intValue()}},{key:"getSecondsDecimal",value:function(){return this._secondsDecimal}},{key:"_getFractionalSeconds",value:function(){var e=l._splitSecondsDecimal(this._secondsDecimal),t=(0,h.default)(e,2),r=(t[0],t[1]);return""===r?b.Decimal.ZERO:b.Decimal.parse(r+"d-"+r.length)}},{key:"equals",value:function(e){return this.getPrecision()===e.getPrecision()&&this.getLocalOffset()===e.getLocalOffset()&&f._sign(this.getLocalOffset())===f._sign(e.getLocalOffset())&&0===this.compareTo(e)&&this._secondsDecimal.equals(e._secondsDecimal)}},{key:"compareTo",value:function(e){var t=this.getDate().getTime(),r=e.getDate().getTime();return t===r?this.getSecondsDecimal().compareTo(e.getSecondsDecimal()):t<r?-1:1}},{key:"toString",value:function(){var e="";switch(this._precision){default:throw new Error("unrecognized timestamp precision "+this._precision);case _.SECONDS:var t=l._splitSecondsDecimal(this._secondsDecimal),r=(0,h.default)(t,2),n=r[0],i=r[1];e=this._lpadZeros(n,2),0<i.length&&(e+="."+i);case _.HOUR_AND_MINUTE:e=this._lpadZeros(this._minutes,2)+(e?":"+e:""),e=this._lpadZeros(this._hour,2)+(e?":"+e:"");case _.DAY:e=this._lpadZeros(this._day,2)+(e?"T"+e:"T");case _.MONTH:e=this._lpadZeros(this._month,2)+(e?"-"+e:"");case _.YEAR:e=this._precision===_.YEAR?this._lpadZeros(this._year,4)+"T":this._precision===_.MONTH?this._lpadZeros(this._year,4)+"-"+e+"T":this._lpadZeros(this._year,4)+"-"+e}var s=this._localOffset;return this._precision>_.DAY&&(0===s&&1===f._sign(s)?e+="Z":e+=(-1===f._sign(s)?"-":"+")+this._lpadZeros(Math.floor(Math.abs(s)/60),2)+":"+this._lpadZeros(Math.abs(s)%60,2)),e}},{key:"_lpadZeros",value:function(e,t){var r=e.toString();if(r.length<=t)return"0".repeat(t-r.length)+r;throw new Error("Unable to fit '"+r+"' into "+t+" characters")}}],[{key:"parse",value:function(e){return d._parse(e)}},{key:"_adjustMsSinceEpochIfNeeded",value:function(e,t){if(100<=e)return t;var r=new Date(t);return r.setUTCFullYear(e),r.getTime()}},{key:"_splitSecondsDecimal",value:function(e){var t=e._getCoefficient().toString(),r=e._getExponent(),n="",i="";if(r<0){var s=Math.max(t.length+r,0);n=t.substr(0,s),i=t.substr(s),0<-e._getExponent()-t.length&&(i="0".repeat(-r-t.length)+i)}else n=0<r?t+"0".repeat(r):t;return[n,i]}},{key:"_valueOf",value:function(e,t,r,n){var i,s=e.getTime()+60*t*1e3;if(e=new Date(s),null!=r){var a=l._splitSecondsDecimal(r),o=(0,h.default)(a,2),u=(o[0],o[1]);i=b.Decimal.parse(e.getUTCSeconds()+"."+u)}else i=b.Decimal.parse(e.getUTCSeconds()+"."+e.getUTCMilliseconds());switch(n){case _.YEAR:return new l(t,e.getUTCFullYear());case _.MONTH:return new l(t,e.getUTCFullYear(),e.getUTCMonth()+1);case _.DAY:return new l(t,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate());case _.HOUR_AND_MINUTE:return new l(t,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes());case _.SECONDS:default:return new l(t,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),i)}}}]),l}();(r.Timestamp=m)._MIN_SECONDS=b.Decimal.ZERO,m._MAX_SECONDS=b.Decimal.parse("60"),m._MIN_MINUTE=0,m._MAX_MINUTE=59,m._MIN_HOUR=0,m._MAX_HOUR=23,m._MIN_DAY=1,m._MAX_DAY=31,m._MIN_MONTH=1,m._MAX_MONTH=12,m._MIN_YEAR=1,m._MAX_YEAR=9999,m._MIN_OFFSET=-1439,m._MAX_OFFSET=1439,(l=w=w||{})[l.YEAR=0]="YEAR",l[l.MONTH=1]="MONTH",l[l.DAY=2]="DAY",l[l.HOUR=3]="HOUR",l[l.MINUTE=4]="MINUTE",l[l.SECONDS=5]="SECONDS",l[l.FRACTIONAL_SECONDS=6]="FRACTIONAL_SECONDS",l[l.OFFSET_POSITIVE=7]="OFFSET_POSITIVE",l[l.OFFSET_NEGATIVE=8]="OFFSET_NEGATIVE",l[l.OFFSET_MINUTES=9]="OFFSET_MINUTES",l[l.OFFSET_ZULU=10]="OFFSET_ZULU",l[l.OFFSET_UNKNOWN=11]="OFFSET_UNKNOWN";function p(e,t,r){(0,c.default)(this,p),this.f=e,this.len=t,this.t=r}var d=function(){function v(){(0,c.default)(this,v)}return(0,a.default)(v,null,[{key:"_parse",value:function(e){if(e.length<1)return null;if(110===e.charCodeAt(0)){if("null"===e||"null.timestamp"===e)return null;throw new Error("Illegal timestamp: "+e)}for(var t,r,n,i,s,a,o,u,l,h=0,c="",_=0,f=v._timeParserStates[w.YEAR],p=e.length;_<p;){if(void 0===f.len){var d=v._readUnknownDigits(e,_);if(0===d.length)throw new Error("No digits found at pos: "+_);u=parseInt(d,10),_+=d.length}else if(0<f.len){if((u=v._readDigits(e,_,f.len))<0)throw new Error("Non digit value found at pos "+_);_+=f.len}switch(f.f){case w.YEAR:h=u;break;case w.MONTH:n=u;break;case w.DAY:i=u;break;case w.HOUR:s=u;break;case w.MINUTE:a=u;break;case w.SECONDS:o=u;break;case w.FRACTIONAL_SECONDS:c=e.substring(20,_);break;case w.OFFSET_POSITIVE:t=1,r=60*u;break;case w.OFFSET_NEGATIVE:t=-1,r=60*u;break;case w.OFFSET_MINUTES:if(r+=u,60<=u)throw new Error("Minute offset "+String(u)+" above maximum or equal to : 60");break;case w.OFFSET_ZULU:t=1,r=0;break;case w.OFFSET_UNKNOWN:r=-0;break;default:throw new Error("invalid internal state")}if(p<=_)break;if(void 0!==f.t){var y=String.fromCharCode(e.charCodeAt(_));if(void 0===(f=v._timeParserStates[f.t[y]]))throw new Error("State was not set pos:"+_);f.f===w.OFFSET_ZULU&&(t=1,r=0)}_++}if(void 0===r){if(void 0!==a)throw new Error('invalid timestamp, missing local offset: "'+e+'"');r=-0}else r*=t;return null==o&&!c||(l=b.Decimal.parse(o+"."+(c||""))),new m(r,h,n,i,s,a,l)}},{key:"_readUnknownDigits",value:function(e,t){for(var r=t;r<e.length&&u.isDigit(e.charCodeAt(r));r++);return e.substring(t,r)}},{key:"_readDigits",value:function(e,t,r){for(var n=0,i=t;i<t+r;i++){var s=e.charCodeAt(i)-48;if(s<0&&9<s)return-1;n=10*n+s}return n}}]),v}();d._timeParserStates=(n={},(0,s.default)(n,w.YEAR,new p(w.YEAR,4,{T:w.OFFSET_UNKNOWN,"-":w.MONTH})),(0,s.default)(n,w.MONTH,new p(w.MONTH,2,{T:w.OFFSET_UNKNOWN,"-":w.DAY})),(0,s.default)(n,w.DAY,new p(w.DAY,2,{T:w.HOUR})),(0,s.default)(n,w.HOUR,new p(w.HOUR,2,{":":w.MINUTE})),(0,s.default)(n,w.MINUTE,new p(w.MINUTE,2,{":":w.SECONDS,"+":w.OFFSET_POSITIVE,"-":w.OFFSET_NEGATIVE,Z:w.OFFSET_ZULU})),(0,s.default)(n,w.SECONDS,new p(w.SECONDS,2,{".":w.FRACTIONAL_SECONDS,"+":w.OFFSET_POSITIVE,"-":w.OFFSET_NEGATIVE,Z:w.OFFSET_ZULU})),(0,s.default)(n,w.FRACTIONAL_SECONDS,new p(w.FRACTIONAL_SECONDS,void 0,{"+":w.OFFSET_POSITIVE,"-":w.OFFSET_NEGATIVE,Z:w.OFFSET_ZULU})),(0,s.default)(n,w.OFFSET_POSITIVE,new p(w.OFFSET_POSITIVE,2,{":":w.OFFSET_MINUTES})),(0,s.default)(n,w.OFFSET_NEGATIVE,new p(w.OFFSET_NEGATIVE,2,{":":w.OFFSET_MINUTES})),(0,s.default)(n,w.OFFSET_MINUTES,new p(w.OFFSET_MINUTES,2,void 0)),(0,s.default)(n,w.OFFSET_ZULU,new p(w.OFFSET_ZULU,0,void 0)),(0,s.default)(n,w.OFFSET_UNKNOWN,new p(w.OFFSET_UNKNOWN,0,void 0)),n)},{"./IonDecimal":9,"./IonText":22,"./util":30,"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/defineProperty":35,"@babel/runtime/helpers/interopRequireDefault":40,"@babel/runtime/helpers/slicedToArray":45}],26:[function(e,t,r){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/classCallCheck"));Object.defineProperty(r,"__esModule",{value:!0});r.IonType=function e(t,r,n,i,s,a){(0,o.default)(this,e),this.binaryTypeId=t,this.name=r,this.isScalar=n,this.isLob=i,this.isNumeric=s,this.isContainer=a}},{"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/interopRequireDefault":40}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./IonType");r.IonTypes={NULL:new n.IonType(0,"null",!0,!1,!1,!1),BOOL:new n.IonType(1,"bool",!0,!1,!1,!1),INT:new n.IonType(2,"int",!0,!1,!0,!1),FLOAT:new n.IonType(4,"float",!0,!1,!0,!1),DECIMAL:new n.IonType(5,"decimal",!0,!1,!1,!1),TIMESTAMP:new n.IonType(6,"timestamp",!0,!1,!1,!1),SYMBOL:new n.IonType(7,"symbol",!0,!1,!1,!1),STRING:new n.IonType(8,"string",!0,!1,!1,!1),CLOB:new n.IonType(9,"clob",!0,!0,!1,!1),BLOB:new n.IonType(10,"blob",!0,!0,!1,!1),LIST:new n.IonType(11,"list",!1,!1,!1,!0),SEXP:new n.IonType(12,"sexp",!1,!1,!1,!0),STRUCT:new n.IonType(13,"struct",!1,!1,!1,!0)}},{"./IonType":26}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodeUtf8=function(e){for(var t,r=0,n=new Uint8Array(4*e.length),i=0;i<e.length;i++)if((t=e.charCodeAt(i))<128)n[r++]=t;else{if(t<2048)n[r++]=t>>6|192;else{if(55295<t&&t<56320){if(++i>=e.length)throw new Error("UTF-8 encode: incomplete surrogate pair");var s=e.charCodeAt(i);if(s<56320||57343<s)throw new Error("UTF-8 encode: second surrogate character 0x"+s.toString(16)+" at index "+i+" out of range");t=65536+((1023&t)<<10)+(1023&s),n[r++]=t>>18|240,n[r++]=t>>12&63|128}else n[r++]=t>>12|224;n[r++]=t>>6&63|128}n[r++]=63&t|128}return n.subarray(0,r)},r.decodeUtf8=function(e){for(var t,r=0,n="";r<e.length;){if(127<(t=e[r++]))if(191<t&&t<224){if(r>=e.length)throw new Error("UTF-8 decode: incomplete 2-byte sequence");t=(31&t)<<6|63&e[r++]}else if(223<t&&t<240){if(r+1>=e.length)throw new Error("UTF-8 decode: incomplete 3-byte sequence");t=(15&t)<<12|(63&e[r++])<<6|63&e[r++]}else{if(!(239<t&&t<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+t.toString(16)+" at index "+(r-1));if(r+2>=e.length)throw new Error("UTF-8 decode: incomplete 4-byte sequence");t=(7&t)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]}if(t<=65535)n+=String.fromCharCode(t);else{if(!(t<=1114111))throw new Error("UTF-8 decode: code point 0x"+t.toString(16)+" exceeds UTF-16 reach");t-=65536,n+=String.fromCharCode(t>>10|55296),n+=String.fromCharCode(1023&t|56320)}}return n}},{}],29:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(e){(0,i.default)(this,t),this.bufferSize=e||4096,this.buffers=[new Uint8Array(this.bufferSize)],this.index=0,this.clean=!1}return(0,s.default)(t,[{key:"writeByte",value:function(e){this.clean=!1,this.currentBuffer[this.index]=e,this.index++,this.index===this.bufferSize&&(this.buffers.push(new Uint8Array(this.bufferSize)),this.index=0)}},{key:"writeBytes",value:function(e,t,r){void 0===t&&(t=0);var n=void 0!==r?Math.min(e.length-t,r):e.length-t;n<this.currentBuffer.length-this.index-1?(this.currentBuffer.set(e.subarray(t,t+n),this.index),this.index+=n):(this.buffers[this.buffers.length-1]=this.currentBuffer.slice(0,this.index),this.buffers.push(e.subarray(t,r)),this.buffers.push(new Uint8Array(this.bufferSize)),this.clean=!1,this.index=0)}},{key:"getBytes",value:function(){if(this.clean)return this.buffers[0];for(var e=new Uint8Array(this.totalSize),t=0,r=0;r<this.buffers.length-1;r++)e.set(this.buffers[r],t),t+=this.buffers[r].length;return e.set(this.currentBuffer.subarray(0,this.index),t),this.buffers=[e,new Uint8Array(this.bufferSize)],this.index=0,this.clean=!0,e}},{key:"currentBuffer",get:function(){return this.buffers[this.buffers.length-1]}},{key:"totalSize",get:function(){for(var e=0,t=0;t<this.buffers.length-1;t++)e+=this.buffers[t].length;return e+this.index}}]),t}();r.Writeable=a},{"@babel/runtime/helpers/classCallCheck":33,"@babel/runtime/helpers/createClass":34,"@babel/runtime/helpers/interopRequireDefault":40}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._sign=function(e){return e<0||0===e&&1/e==-1/0?-1:1},r._hasValue=function(e){return null!=e}},{}],31:[function(e,t,r){t.exports=function(e){if(Array.isArray(e))return e}},{}],32:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},{}],33:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],34:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},{}],35:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{}],36:[function(e,t,r){function n(){return t.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}t.exports=n},{}],37:[function(e,n,t){var s=e("./superPropBase");function i(e,t,r){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=i=Reflect.get:n.exports=i=function(e,t,r){var n=s(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},i(e,t,r||e)}n.exports=i},{"./superPropBase":46}],38:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},{}],39:[function(e,t,r){var n=e("./setPrototypeOf");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},{"./setPrototypeOf":44}],40:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],41:[function(e,t,r){t.exports=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw s}}return r}}},{}],42:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},{}],43:[function(e,t,r){var n=e("../helpers/typeof"),i=e("./assertThisInitialized");t.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},{"../helpers/typeof":47,"./assertThisInitialized":32}],44:[function(e,r,t){function n(e,t){return r.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}r.exports=n},{}],45:[function(e,t,r){var n=e("./arrayWithHoles"),i=e("./iterableToArrayLimit"),s=e("./nonIterableRest");t.exports=function(e,t){return n(e)||i(e,t)||s()}},{"./arrayWithHoles":31,"./iterableToArrayLimit":41,"./nonIterableRest":42}],46:[function(e,t,r){var n=e("./getPrototypeOf");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},{"./getPrototypeOf":38}],47:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(e){return n(e)}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(e)}t.exports=i},{}]},{},[3])(3)});